{"file_contents":{"components/ui/card.tsx":{"content":"import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\";\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\";\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n));\nCardTitle.displayName = \"CardTitle\";\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\";\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n));\nCardContent.displayName = \"CardContent\";\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n));\nCardFooter.displayName = \"CardFooter\";\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\n","size_bytes":1873},"QUICKSTART.md":{"content":"# FlowMate - Quick Start Guide\n\n## üöÄ For New Team Members\n\nYou've just pulled this repo. **STOP and read this first!**\n\n### What is FlowMate?\nAn AI-powered productivity assistant that generates personalized daily schedules based on your focus patterns, habits, and calendar events.\n\n### Why is this different?\nThis project uses a **phased development approach** where 5 different developers can work in parallel on different features without causing merge conflicts.\n\n---\n\n## üìã Step-by-Step: Your First Action\n\n### Step 1: Read the Documentation (5 minutes)\n```bash\n# Essential reading (in order):\n1. This file (QUICKSTART.md) - You are here ‚úì\n2. DEVELOPMENT.md - Workflow and conflict prevention\n3. PHASES.md - What each phase builds\n4. replit.md - Architecture decisions\n```\n\n### Step 2: Check What's Available\n```bash\ncat .phase-status.json\n```\n\nLook for phases with:\n- `\"status\": \"not-started\"` - Available to claim\n- `\"dependencies\": []` or all dependencies `\"completed\"` - You can start\n\n### Step 3: Ask the Agent\nIn your terminal or Replit Agent chat:\n```\n\"Which phase should I work on? I'm comfortable with [frontend/backend/both]\"\n```\n\nThe agent will:\n- ‚úÖ Check which phases are available\n- ‚úÖ Verify dependencies are met  \n- ‚úÖ Recommend the best phase for you\n- ‚úÖ Explain what you'll build\n- ‚úÖ Guide you through setup\n\n### Step 4: Claim Your Phase\nUpdate `.phase-status.json`:\n```json\n{\n  \"phase-X\": {\n    \"status\": \"in-progress\",\n    \"assignedTo\": \"your-github-username\",\n    \"branch\": \"phase-X-your-name\",\n    \"startedAt\": \"2025-11-08T10:00:00Z\"\n  }\n}\n```\n\nCommit this immediately:\n```bash\ngit add .phase-status.json\ngit commit -m \"claim: Phase X by your-name\"\ngit push\n```\n\n### Step 5: Create Your Branch\n```bash\ngit checkout -b phase-X-your-name\n```\n\n### Step 6: Install Dependencies (if not already done)\n```bash\nnpm install\n```\n\n### Step 7: Set Up Environment\n```bash\ncp .env.example .env.local\n# Edit .env.local and add required keys for your phase\n```\n\n### Step 8: Start Building!\n```bash\nnpm run dev\n# Server starts on http://0.0.0.0:5000\n```\n\nFollow the tasks in `PHASES.md` for your specific phase.\n\n---\n\n## üéØ Quick Reference\n\n### Project Tech Stack\n- **Frontend:** Next.js 15 + TypeScript + Tailwind CSS\n- **Backend:** Next.js API Routes  \n- **Database:** Replit DB (Key-Value)\n- **AI:** Google Gemini API (Free)\n- **Auth:** Clerk (Google OAuth + Guest)\n- **State:** Zustand\n- **Charts:** Recharts\n\n### Phase Overview\n| Phase | What You Build | Time | Dependencies |\n|-------|----------------|------|--------------|\n| **1** | Next.js setup, Tailwind, base components | 1.5-2 days | None |\n| **2** | Clerk auth, Replit DB, API routes | 2-2.5 days | Phase 1 |\n| **3** | Onboarding, calendar, timeline UI | 3-3.5 days | Phases 1, 2 |\n| **4** | AI chat, plan generation, feedback | 2-3 days | Phases 1, 2, 3 |\n| **5** | Analytics dashboard, settings, polish | 2 days | Phases 2, 3, 4 |\n\n### Important Files You'll Edit\n**Phase 1:**\n- `/app/layout.tsx` - Root layout\n- `/components/ui/*` - Base components\n- `/stores/*` - Zustand stores\n- `/types/shared.ts` - Shared types\n\n**Phase 2:**\n- `/lib/db/*` - Database utilities\n- `/app/api/auth/*` - Auth routes\n- `/middleware.ts` - Route protection\n\n**Phase 3:**\n- `/app/(dashboard)/*` - Main app pages\n- `/components/calendar/*` - Calendar UI\n- `/components/timeline/*` - Timeline UI\n- `/components/onboarding/*` - Onboarding forms\n\n**Phase 4:**\n- `/lib/ai/*` - AI client\n- `/app/api/plan/*` - Plan generation API\n- `/app/api/chat/*` - Chat API\n- `/components/chat/*` - Chat UI\n\n**Phase 5:**\n- `/app/analytics/*` - Analytics pages\n- `/app/settings/*` - Settings pages\n- `/components/charts/*` - Chart components\n\n---\n\n## ‚ö†Ô∏è Conflict Prevention Rules\n\n### Rule 1: File Ownership\n**Only edit files your phase owns!**\n- See \"Important Files You'll Edit\" above\n- Full list in `PHASES.md` under \"Conflict Prevention\"\n\n### Rule 2: Use Shared Types\n```typescript\n// ‚úÖ Good\nimport { Task, UserProfile } from '@/types/shared';\n\n// ‚ùå Bad - creates conflicts\ninterface Task { ... }  // Already exists!\n```\n\n### Rule 3: Mock Missing Dependencies\nIf a phase you depend on isn't done:\n```typescript\nconst USE_MOCK = process.env.NEXT_PUBLIC_MOCK_DATA === 'true';\n```\n\n### Rule 4: Update Status Often\n- When you start: Update `.phase-status.json`\n- Daily: Push your branch\n- When done: Create PR + update status to \"completed\"\n\n---\n\n## üîß Common Commands\n\n```bash\n# Install dependencies\nnpm install\n\n# Run dev server\nnpm run dev\n\n# Check TypeScript errors\nnpm run build\n\n# Lint code\nnpm run lint\n\n# Check phase status\ncat .phase-status.json\n\n# View your phase tasks\ngrep \"Phase X\" PHASES.md -A 50\n```\n\n---\n\n## üí° Tips for Success\n\n1. **Read First, Code Second**\n   - 30 mins reading docs = 3 hours saved on conflicts\n\n2. **Ask the Agent Frequently**\n   - \"How should I structure this component?\"\n   - \"Am I following the phase guidelines?\"\n   - \"Review my changes before I commit\"\n\n3. **Communicate Early**\n   - Stuck? Ask in team chat\n   - Blocker? Update your phase status\n   - Done? Notify dependent phase owners\n\n4. **Test Incrementally**\n   - Don't wait until the end\n   - Test each task as you complete it\n   - Use acceptance criteria in PHASES.md\n\n5. **Follow the Plan**\n   - Tasks are ordered for a reason\n   - Don't skip ahead\n   - Document any deviations\n\n---\n\n## üÜò Getting Help\n\n### Documentation\n1. `DEVELOPMENT.md` - Detailed workflow guide\n2. `PHASES.md` - Phase tasks and acceptance criteria\n3. `replit.md` - Architecture and decisions\n4. `.phase-status.json` - Real-time phase status\n\n### Ask the Agent\n```\n\"I'm working on Phase 3, how do I [specific question]?\"\n\"Review my Phase X implementation\"\n\"What's blocking Phase Y from starting?\"\n```\n\n### Team Communication\n- Update `.phase-status.json` with blockers\n- Leave TODO comments with your name\n- Tag phase owners in PRs\n- Ask questions early!\n\n---\n\n## ‚úÖ Before You Start Coding\n\n- [ ] Read QUICKSTART.md (this file)\n- [ ] Read DEVELOPMENT.md\n- [ ] Read PHASES.md for your phase\n- [ ] Check `.phase-status.json`\n- [ ] Ask agent which phase to work on\n- [ ] Update `.phase-status.json` with your name\n- [ ] Create your branch: `phase-X-your-name`\n- [ ] Set up `.env.local` with required keys\n- [ ] Run `npm install`\n- [ ] Run `npm run dev` to verify setup\n- [ ] Read your phase's acceptance criteria\n\n---\n\n## üì¶ What's Already Set Up\n\n‚úÖ Next.js 15 with TypeScript  \n‚úÖ Tailwind CSS configured  \n‚úÖ Package.json with all dependencies  \n‚úÖ Dev server runs on port 5000  \n‚úÖ Shared type definitions in `/types/shared.ts`  \n‚úÖ Phase documentation complete  \n‚úÖ Git repository initialized  \n\n**You can start building immediately!**\n\n---\n\n## üéâ Ready to Build?\n\n1. Ask the agent: **\"Which phase should I work on?\"**\n2. Follow the agent's instructions\n3. Read your phase details in `PHASES.md`\n4. Start building!\n\n**Remember:** This is a team project. Communication prevents conflicts!\n\n---\n\n**Questions?** Ask the Replit Agent or check `DEVELOPMENT.md`\n\n**Last Updated:** November 8, 2025\n","size_bytes":7047},"types/shared.ts":{"content":"/**\n * SHARED TYPE DEFINITIONS\n * \n * ‚ö†Ô∏è IMPORTANT: These types are used across ALL phases.\n * Any changes must be coordinated with all phase owners.\n * \n * Last updated: November 8, 2025\n */\n\nexport interface UserProfile {\n  userId: string;\n  occupation: string;\n  focusScale: number;\n  peakHours: string[];\n  habits: string[];\n  routine: string;\n  colorGradient: {\n    low: string;\n    high: string;\n  };\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface Task {\n  id: string;\n  time: string;\n  duration: number;\n  title: string;\n  priority: number;\n  completed: boolean;\n  source: 'ai' | 'user' | 'calendar';\n}\n\nexport interface DailyPlan {\n  date: string;\n  tasks: Task[];\n  generatedAt: string;\n  lastModified: string;\n}\n\nexport interface Feedback {\n  taskId: string;\n  focusRating: number;\n  completionPercent: number;\n  textFeedback?: string;\n  timestamp: string;\n  taskDate: string;\n}\n\nexport interface ProductivityScore {\n  date: string;\n  score: number;\n  totalTasks: number;\n  completedTasks: number;\n  avgFocus: number;\n  avgCompletion: number;\n  calculatedAt: string;\n}\n\nexport interface HourlyActivity {\n  focus: number;\n  activity: string;\n  completion: number;\n}\n\nexport interface ActivityPattern {\n  date: string;\n  hourly: Record<string, HourlyActivity>;\n}\n\nexport interface UserSettings {\n  notifications: {\n    email: boolean;\n    push: boolean;\n    feedbackTiming: number;\n  };\n  appearance: {\n    darkMode: boolean;\n    timeFormat: '12h' | '24h';\n    colorPreset: string;\n  };\n  privacy: {\n    dataCollection: boolean;\n  };\n}\n\nexport interface OnboardingData {\n  occupation: string;\n  wakeTime: string;\n  sleepTime: string;\n  habits: string[];\n  focusScale: number;\n  peakHours: string[];\n}\n\nexport interface AIGenerationContext {\n  profile: UserProfile;\n  historicalFeedback: Feedback[];\n  calendarEvents?: any[];\n  activityPatterns: ActivityPattern[];\n}\n\nexport interface AIChatCommand {\n  action: 'generate' | 'move' | 'add' | 'delete' | 'adjust';\n  taskId?: string;\n  newTime?: string;\n  task?: Partial<Task>;\n}\n\nexport interface APIResponse<T> {\n  data?: T;\n  error?: string;\n  code?: string;\n  details?: any;\n}\n\nexport type PriorityLevel = 1.0 | 1.5 | 2.0 | 2.5 | 3.0 | 3.5 | 4.0 | 4.5 | 5.0;\n\nexport type ProductivityBadge = 'excellent' | 'good' | 'average' | 'needs-work';\n\nexport function getProductivityBadge(score: number): ProductivityBadge {\n  if (score >= 90) return 'excellent';\n  if (score >= 70) return 'good';\n  if (score >= 50) return 'average';\n  return 'needs-work';\n}\n\nexport function getBadgeColor(badge: ProductivityBadge): string {\n  switch (badge) {\n    case 'excellent': return '#10b981';\n    case 'good': return '#f59e0b';\n    case 'average': return '#f97316';\n    case 'needs-work': return '#ef4444';\n  }\n}\n\nexport function getPriorityColor(priority: number, gradient: UserProfile['colorGradient']): string {\n  const { low, high } = gradient;\n  const ratio = (priority - 1) / 4;\n  return interpolateColor(low, high, ratio);\n}\n\nfunction interpolateColor(color1: string, color2: string, ratio: number): string {\n  const hex = (color: string) => parseInt(color.slice(1), 16);\n  const r1 = (hex(color1) >> 16) & 255;\n  const g1 = (hex(color1) >> 8) & 255;\n  const b1 = hex(color1) & 255;\n  const r2 = (hex(color2) >> 16) & 255;\n  const g2 = (hex(color2) >> 8) & 255;\n  const b2 = hex(color2) & 255;\n  const r = Math.round(r1 + (r2 - r1) * ratio);\n  const g = Math.round(g1 + (g2 - g1) * ratio);\n  const b = Math.round(b1 + (b2 - b1) * ratio);\n  return `#${((r << 16) | (g << 8) | b).toString(16).padStart(6, '0')}`;\n}\n","size_bytes":3580},"DEVELOPMENT.md":{"content":"# FlowMate - Development Guide\n\n## üö® STOP! Read This First\n\n**DO NOT run `npm install` and start building immediately.**\n\nThis project uses a **phased development approach** where different team members work on separate phases to avoid conflicts and enable parallel development.\n\n---\n\n## Quick Start for New Team Members\n\n### 1. First Time Setup\n```bash\n# Clone the repository\ngit clone <repo-url>\ncd flowmate\n\n# Read the documentation (DON'T SKIP THIS!)\ncat PHASES.md\ncat DEVELOPMENT.md\n\n# Check current phase status\ncat .phase-status.json\n\n# Install dependencies (only after reading docs!)\nnpm install\n```\n\n### 2. Choose Your Phase\nBefore starting work:\n\n1. **Review Available Phases**: Read `PHASES.md` to understand all phases\n2. **Check Dependencies**: Ensure prerequisite phases are complete\n3. **Claim Your Phase**: Update `.phase-status.json` (see below)\n4. **Create Your Branch**: `git checkout -b phase-X-your-name`\n\n### 3. Update Phase Status\nEdit `.phase-status.json` to claim your phase:\n\n```json\n{\n  \"phase-1\": {\n    \"status\": \"in-progress\",\n    \"assignedTo\": \"your-name\",\n    \"startedAt\": \"2025-11-08T10:00:00Z\",\n    \"branch\": \"phase-1-your-name\"\n  }\n}\n```\n\nCommit this change immediately so others know you're working on it.\n\n---\n\n## Phase Selection Workflow\n\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ  Pull latest from GitHub            ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n               ‚îÇ\n               ‚ñº\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ  Read PHASES.md & DEVELOPMENT.md    ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n               ‚îÇ\n               ‚ñº\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ  Check .phase-status.json           ‚îÇ\n‚îÇ  - What's available?                ‚îÇ\n‚îÇ  - What are dependencies?           ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n               ‚îÇ\n               ‚ñº\n         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n         ‚îÇ Ask Agent: ‚îÇ\n         ‚îÇ Which phase‚îÇ\n         ‚îÇ should I   ‚îÇ\n         ‚îÇ work on?   ‚îÇ\n         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n               ‚îÇ\n               ‚ñº\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ Agent analyzes:                     ‚îÇ\n‚îÇ - Your skills/preference            ‚îÇ\n‚îÇ - Available phases                  ‚îÇ\n‚îÇ - Dependencies satisfied?           ‚îÇ\n‚îÇ - Current blockers                  ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n               ‚îÇ\n               ‚ñº\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ Agent recommends phase + explains   ‚îÇ\n‚îÇ - Why this phase?                   ‚îÇ\n‚îÇ - What you'll build                 ‚îÇ\n‚îÇ - How to avoid conflicts            ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n               ‚îÇ\n               ‚ñº\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ Update .phase-status.json           ‚îÇ\n‚îÇ Create branch: phase-X-name         ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n               ‚îÇ\n               ‚ñº\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ Start building your phase           ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n---\n\n## Working on Your Phase\n\n### Daily Workflow\n\n```bash\n# Start of day\ngit checkout phase-X-your-name\ngit pull origin main  # Get latest shared code\nnpm install           # Update dependencies if needed\n\n# During development\nnpm run dev          # Test locally on port 5000\n\n# Commit frequently\ngit add .\ngit commit -m \"phase-X: clear description of changes\"\n\n# End of day\ngit push origin phase-X-your-name\n```\n\n### Following Phase Guidelines\n\nEach phase in `PHASES.md` includes:\n- ‚úÖ **Tasks**: Specific items to complete\n- ‚úÖ **Time estimates**: Plan your work\n- ‚úÖ **Deliverables**: What you must complete\n- ‚úÖ **Acceptance criteria**: How to verify completion\n- ‚úÖ **Handoff notes**: What other phases depend on\n\n**Follow these exactly to avoid conflicts.**\n\n---\n\n## Conflict Prevention Rules\n\n### Rule 1: File Ownership\nOnly edit files your phase owns (see `PHASES.md` > Conflict Prevention).\n\n**‚úÖ Safe:**\n```typescript\n// Phase 3 editing their own component\n// File: /components/timeline/Timeline.tsx\nexport function Timeline() { ... }\n```\n\n**‚ùå Dangerous:**\n```typescript\n// Phase 3 editing Phase 2's file\n// File: /lib/db/client.ts  <- This belongs to Phase 2!\nexport function dbClient() { ... }\n```\n\n### Rule 2: Use Shared Contracts\nImport types from `/types/shared.ts` instead of creating your own:\n\n**‚úÖ Good:**\n```typescript\nimport { Task, UserProfile } from '@/types/shared';\n```\n\n**‚ùå Bad:**\n```typescript\n// Creating your own conflicting type\ninterface Task { ... }  // Already exists in shared!\n```\n\n### Rule 3: Use Mock Services\nIf a phase you depend on isn't done yet, use mocks:\n\n**Example:** Phase 3 needs AI (Phase 4), but Phase 4 isn't ready:\n\n```typescript\n// /lib/ai/client.ts\nconst USE_MOCK = process.env.NEXT_PUBLIC_MOCK_AI === 'true';\n\nexport async function generatePlan(profile: UserProfile) {\n  if (USE_MOCK) {\n    return mockGeneratePlan(profile);\n  }\n  return realAIGeneratePlan(profile);\n}\n```\n\nSet in `.env.local`:\n```\nNEXT_PUBLIC_MOCK_AI=true\n```\n\n### Rule 4: Feature Flags\nUse feature flags to disable incomplete features:\n\n```typescript\n// /components/chat/ChatInterface.tsx\nconst AI_ENABLED = process.env.NEXT_PUBLIC_ENABLE_AI === 'true';\n\nexport function ChatInterface() {\n  if (!AI_ENABLED) {\n    return <ComingSoonMessage />;\n  }\n  return <ActualChat />;\n}\n```\n\n---\n\n## Merge Process\n\n### When You Finish Your Phase\n\n1. **Self-Review Checklist**\n   - [ ] All tasks from `PHASES.md` completed\n   - [ ] Acceptance criteria met\n   - [ ] No TypeScript errors\n   - [ ] Tests pass (if applicable)\n   - [ ] No files from other phases edited\n   - [ ] Handoff notes documented\n\n2. **Update Phase Status**\n```json\n{\n  \"phase-X\": {\n    \"status\": \"completed\",\n    \"assignedTo\": \"your-name\",\n    \"completedAt\": \"2025-11-08T18:00:00Z\",\n    \"branch\": \"phase-X-your-name\"\n  }\n}\n```\n\n3. **Create Pull Request**\n   - Title: `[Phase X] Feature Name`\n   - Description: Copy acceptance criteria from `PHASES.md`\n   - Check off completed items\n   - Add screenshots/videos if UI changes\n\n4. **Request Review**\n   - Tag team lead\n   - Tag anyone whose phase depends on yours\n\n5. **After Merge**\n   - Delete your feature branch\n   - Pull latest `main`\n   - Celebrate! üéâ\n\n---\n\n## Common Scenarios\n\n### Scenario 1: \"I just pulled the repo, what do I do?\"\n\n```bash\n# Step 1: Read documentation\ncat PHASES.md         # Understand phases\ncat DEVELOPMENT.md    # This file\n\n# Step 2: Ask the agent\n# In Replit chat or your tool:\n\"Which phase should I work on? I'm comfortable with [frontend/backend/both]\"\n\n# Step 3: Agent will:\n# - Check .phase-status.json\n# - Verify dependencies\n# - Recommend a phase\n# - Explain how to start\n\n# Step 4: Follow agent's instructions\n# Agent will help you:\n# - Update .phase-status.json\n# - Create your branch\n# - Set up environment variables\n# - Understand your tasks\n```\n\n### Scenario 2: \"My phase depends on Phase X, but it's not done yet\"\n\n**Option A: Use Mocks (Recommended)**\n```typescript\n// Create mock in your phase\n// /lib/mocks/phase-X-mock.ts\nexport function mockFunctionFromPhaseX() {\n  return { /* realistic fake data */ };\n}\n```\n\n**Option B: Wait (Not Recommended)**\n- Only if mocking is too difficult\n- Communicate with Phase X developer\n- Work on other tasks in your phase\n\n**Option C: Help Phase X**\n- Coordinate with that developer\n- Work together to unblock\n\n### Scenario 3: \"I need to change a file another phase owns\"\n\n**‚ùå Don't do it!**\n\nInstead:\n1. Create an issue documenting the need\n2. Discuss with file owner\n3. They make the change, or\n4. Get approval to edit with clear commit message\n\n**Example:**\n```bash\n# If you MUST edit Phase 2's file from Phase 3:\ngit commit -m \"phase-3: Update db types for timeline feature (approved by Phase 2 owner)\"\n```\n\n### Scenario 4: \"Phase X merged, now I have conflicts\"\n\n```bash\n# Step 1: Save your work\ngit add .\ngit commit -m \"WIP: saving before merge\"\n\n# Step 2: Get latest main\ngit checkout main\ngit pull origin main\n\n# Step 3: Merge into your branch\ngit checkout phase-X-your-name\ngit merge main\n\n# Step 4: Resolve conflicts\n# - Keep shared contract changes from main\n# - Keep your phase-specific changes\n# - Test thoroughly\n\ngit add .\ngit commit -m \"phase-X: Merge main, resolve conflicts\"\n```\n\n---\n\n## Environment Setup\n\n### Required Environment Variables\n\nCreate `.env.local` (NEVER commit this):\n\n```bash\n# Phase 2: Authentication\nNEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_...\nCLERK_SECRET_KEY=sk_test_...\n\n# Phase 4: AI Integration\nGOOGLE_GEMINI_API_KEY=...\n\n# Feature Flags\nNEXT_PUBLIC_ENABLE_AI=false        # true when Phase 4 done\nNEXT_PUBLIC_MOCK_DATA=true         # false when Phase 2 done\nNEXT_PUBLIC_MOCK_AI=true           # false when Phase 4 done\n\n# Replit specific (auto-provided)\nREPLIT_DB_URL=...\n```\n\n### Getting API Keys\n\n**Clerk (Phase 2):**\n1. Go to https://clerk.com\n2. Create free account\n3. Create application\n4. Copy publishable and secret keys\n\n**Google Gemini (Phase 4):**\n1. Go to https://ai.google.dev\n2. Get API key (100% free)\n3. Copy key\n\n**Replit DB:**\n- Automatically provided in Replit environment\n- No setup needed\n\n---\n\n## Testing Your Phase\n\n### Run Dev Server\n```bash\nnpm run dev\n# Server starts on http://0.0.0.0:5000\n# Access in Replit preview pane\n```\n\n### Check for Errors\n```bash\n# TypeScript errors\nnpm run build\n\n# Linting\nnpm run lint\n```\n\n### Manual Testing Checklist\nEach phase has specific acceptance criteria in `PHASES.md`. For example:\n\n**Phase 3 Testing:**\n- [ ] Onboarding flow completes\n- [ ] Calendar displays correctly\n- [ ] Timeline shows tasks\n- [ ] Can edit upcoming tasks\n- [ ] Past tasks are locked\n- [ ] Mobile responsive\n\n---\n\n## Getting Help\n\n### Agent Assistance\nThe Replit Agent can help you:\n\n**Starting a phase:**\n```\n\"I want to work on Phase 3. Can you:\n1. Check if dependencies are met\n2. Explain what I need to build\n3. Help me set up my branch\"\n```\n\n**During development:**\n```\n\"I'm working on the Timeline component (Phase 3).\nHow should I structure the hourly grid to avoid conflicts\nwith the AI updates from Phase 4?\"\n```\n\n**Before merging:**\n```\n\"Review my Phase 3 changes. Have I:\n1. Completed all tasks?\n2. Met acceptance criteria?\n3. Avoided editing other phases' files?\"\n```\n\n### Team Communication\n- **Slack/Discord**: Daily standups\n- **GitHub Issues**: Track blockers\n- **PR Comments**: Code review\n- **.phase-status.json**: Current progress\n\n---\n\n## Architecture Decisions\n\nSee `replit.md` for:\n- Why we chose this tech stack\n- Database schema rationale\n- State management approach\n- Performance considerations\n\n---\n\n## Tips for Success\n\n1. **Read First, Code Second**\n   - 30 minutes reading docs saves 3 hours of conflicts\n\n2. **Communicate Early**\n   - Ask questions before making assumptions\n   - Share blockers immediately\n\n3. **Test Incrementally**\n   - Don't wait until phase completion\n   - Test each task as you finish\n\n4. **Use the Agent**\n   - Agent knows the full plan\n   - Ask for guidance frequently\n\n5. **Follow the Process**\n   - Update `.phase-status.json`\n   - Create proper branches\n   - Write clear commits\n\n6. **Think About Handoff**\n   - Document your decisions\n   - Leave clear TODOs\n   - Update type definitions\n\n---\n\n## Project Structure Reference\n\n```\nflowmate/\n‚îú‚îÄ‚îÄ app/                      # Next.js app directory\n‚îÇ   ‚îú‚îÄ‚îÄ (dashboard)/         # Phase 3: Main app routes\n‚îÇ   ‚îú‚îÄ‚îÄ api/                 # Phase 2: API routes\n‚îÇ   ‚îú‚îÄ‚îÄ analytics/           # Phase 5: Analytics pages\n‚îÇ   ‚îú‚îÄ‚îÄ onboarding/          # Phase 3: Onboarding flow\n‚îÇ   ‚îú‚îÄ‚îÄ settings/            # Phase 5: Settings pages\n‚îÇ   ‚îî‚îÄ‚îÄ layout.tsx           # Phase 1: Root layout\n‚îú‚îÄ‚îÄ components/              # React components\n‚îÇ   ‚îú‚îÄ‚îÄ ui/                  # Phase 1: Base components\n‚îÇ   ‚îú‚îÄ‚îÄ calendar/            # Phase 3: Calendar components\n‚îÇ   ‚îú‚îÄ‚îÄ timeline/            # Phase 3: Timeline components\n‚îÇ   ‚îú‚îÄ‚îÄ chat/                # Phase 4: AI chat\n‚îÇ   ‚îú‚îÄ‚îÄ charts/              # Phase 5: Analytics charts\n‚îÇ   ‚îî‚îÄ‚îÄ onboarding/          # Phase 3: Onboarding forms\n‚îú‚îÄ‚îÄ lib/                     # Utilities\n‚îÇ   ‚îú‚îÄ‚îÄ db/                  # Phase 2: Database utilities\n‚îÇ   ‚îú‚îÄ‚îÄ ai/                  # Phase 4: AI client\n‚îÇ   ‚îú‚îÄ‚îÄ mocks/               # All: Mock data\n‚îÇ   ‚îî‚îÄ‚îÄ utils.ts             # Phase 1: Shared utilities\n‚îú‚îÄ‚îÄ stores/                  # Zustand stores\n‚îÇ   ‚îú‚îÄ‚îÄ auth.ts              # Phase 2: Auth state\n‚îÇ   ‚îú‚îÄ‚îÄ user.ts              # Phase 2: User profile\n‚îÇ   ‚îú‚îÄ‚îÄ plan.ts              # Phase 3: Daily plan\n‚îÇ   ‚îî‚îÄ‚îÄ feedback.ts          # Phase 4: Feedback state\n‚îú‚îÄ‚îÄ types/                   # TypeScript types\n‚îÇ   ‚îú‚îÄ‚îÄ shared.ts            # Phase 1: Shared types\n‚îÇ   ‚îî‚îÄ‚îÄ database.ts          # Phase 2: DB types\n‚îú‚îÄ‚îÄ PHASES.md                # This file - Phase breakdown\n‚îú‚îÄ‚îÄ DEVELOPMENT.md           # You are here\n‚îú‚îÄ‚îÄ replit.md                # Architecture decisions\n‚îú‚îÄ‚îÄ .phase-status.json       # Current phase status\n‚îî‚îÄ‚îÄ README.md                # User-facing documentation\n```\n\n---\n\n## Next Steps\n\n1. **Read `PHASES.md`** to understand the full scope\n2. **Check `.phase-status.json`** to see current status\n3. **Ask the agent:** \"Which phase should I work on?\"\n4. **Follow the workflow** described in this document\n\nGood luck building FlowMate! üöÄ\n\n---\n\n**Last Updated:** November 8, 2025  \n**Questions?** Ask in team chat or consult the agent\n","size_bytes":14676},"app/api/settings/route.ts":{"content":"import { NextRequest } from 'next/server';\nimport { settingsRepo } from '@/lib/db/repository';\nimport { getUserId, unauthorized, serverError, success } from '@/lib/api-utils';\nimport { UserSettings } from '@/types/shared';\n\nconst defaultSettings: UserSettings = {\n  notifications: {\n    email: true,\n    push: true,\n    feedbackTiming: 2,\n  },\n  appearance: {\n    darkMode: false,\n    timeFormat: '12h',\n    colorPreset: 'blue',\n  },\n  privacy: {\n    dataCollection: true,\n  },\n};\n\nexport async function GET() {\n  try {\n    const userId = await getUserId();\n    \n    if (!userId) {\n      return unauthorized();\n    }\n\n    const result = await settingsRepo.getSettings(userId);\n    \n    if (!result.ok) {\n      if (result.error === 'Key not found') {\n        return success(defaultSettings);\n      }\n      console.error('Database error:', result.error);\n      return serverError('Failed to fetch settings');\n    }\n\n    return success(result.value);\n  } catch (error) {\n    console.error('Error fetching settings:', error);\n    return serverError();\n  }\n}\n\nexport async function PUT(request: NextRequest) {\n  try {\n    const userId = await getUserId();\n    \n    if (!userId) {\n      return unauthorized();\n    }\n\n    const body = await request.json();\n    \n    const settings: UserSettings = {\n      notifications: body.notifications || defaultSettings.notifications,\n      appearance: body.appearance || defaultSettings.appearance,\n      privacy: body.privacy || defaultSettings.privacy,\n    };\n\n    const result = await settingsRepo.saveSettings(userId, settings);\n    \n    if (!result.ok) {\n      return serverError('Failed to save settings');\n    }\n\n    return success(settings);\n  } catch (error) {\n    console.error('Error updating settings:', error);\n    return serverError();\n  }\n}\n","size_bytes":1788},"components/ui/use-toast.ts":{"content":"import * as React from \"react\";\n\nimport type { ToastActionElement, ToastProps } from \"@/components/ui/toast\";\n\nconst TOAST_LIMIT = 1;\nconst TOAST_REMOVE_DELAY = 1000000;\n\ntype ToasterToast = ToastProps & {\n  id: string;\n  title?: React.ReactNode;\n  description?: React.ReactNode;\n  action?: ToastActionElement;\n};\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const;\n\nlet count = 0;\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER;\n  return count.toString();\n}\n\ntype ActionType = typeof actionTypes;\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"];\n      toast: ToasterToast;\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"];\n      toast: Partial<ToasterToast>;\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"];\n      toastId?: ToasterToast[\"id\"];\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"];\n      toastId?: ToasterToast[\"id\"];\n    };\n\ninterface State {\n  toasts: ToasterToast[];\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>();\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return;\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId);\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    });\n  }, TOAST_REMOVE_DELAY);\n\n  toastTimeouts.set(toastId, timeout);\n};\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      };\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      };\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action;\n\n      if (toastId) {\n        addToRemoveQueue(toastId);\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id);\n        });\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      };\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        };\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      };\n  }\n};\n\nconst listeners: Array<(state: State) => void> = [];\n\nlet memoryState: State = { toasts: [] };\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action);\n  listeners.forEach((listener) => {\n    listener(memoryState);\n  });\n}\n\ntype Toast = Omit<ToasterToast, \"id\">;\n\nfunction toast({ ...props }: Toast) {\n  const id = genId();\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    });\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id });\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss();\n      },\n    },\n  });\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  };\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState);\n\n  React.useEffect(() => {\n    listeners.push(setState);\n    return () => {\n      const index = listeners.indexOf(setState);\n      if (index > -1) {\n        listeners.splice(index, 1);\n      }\n    };\n  }, [state]);\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  };\n}\n\nexport { useToast, toast };\n","size_bytes":3823},"lib/db/client.ts":{"content":"import Client from '@replit/database';\n\nclass ReplitDBClient {\n  private static instance: Client;\n  \n  private constructor() {}\n  \n  static getInstance(): Client {\n    if (!ReplitDBClient.instance) {\n      ReplitDBClient.instance = new Client();\n    }\n    return ReplitDBClient.instance;\n  }\n}\n\nexport const db = ReplitDBClient.getInstance();\n\nexport type DBResult<T> = {\n  ok: boolean;\n  value?: T;\n  error?: string;\n};\n\nexport async function safeGet<T>(key: string): Promise<DBResult<T>> {\n  try {\n    const result = await db.get(key);\n    if (result === null || result === undefined) {\n      return { ok: false, error: 'Key not found' };\n    }\n    return { ok: true, value: result as T };\n  } catch (error) {\n    return { ok: false, error: error instanceof Error ? error.message : 'Unknown error' };\n  }\n}\n\nexport async function safeSet<T>(key: string, value: T): Promise<DBResult<null>> {\n  try {\n    await db.set(key, value);\n    return { ok: true };\n  } catch (error) {\n    return { ok: false, error: error instanceof Error ? error.message : 'Unknown error' };\n  }\n}\n\nexport async function safeDelete(key: string): Promise<DBResult<null>> {\n  try {\n    await db.delete(key);\n    return { ok: true };\n  } catch (error) {\n    return { ok: false, error: error instanceof Error ? error.message : 'Unknown error' };\n  }\n}\n\nexport async function safeList(prefix: string = ''): Promise<DBResult<string[]>> {\n  try {\n    const result = await db.list(prefix);\n    \n    if (result && 'ok' in result && result.ok) {\n      return { ok: true, value: result.value as string[] };\n    } else if (Array.isArray(result)) {\n      return { ok: true, value: result };\n    } else {\n      return { ok: false, error: 'Failed to list keys' };\n    }\n  } catch (error) {\n    return { ok: false, error: error instanceof Error ? error.message : 'Unknown error' };\n  }\n}\n","size_bytes":1847},"types/database.ts":{"content":"/**\n * DATABASE TYPE DEFINITIONS\n * \n * These types represent the structure of data in Replit DB.\n * Phase 2 owns this file.\n * \n * Last updated: November 8, 2025\n */\n\nimport { UserProfile, DailyPlan, Feedback, ProductivityScore, ActivityPattern, UserSettings } from './shared';\n\nexport type DBKey = \n  | `user:${string}:profile`\n  | `user:${string}:plan:${string}`\n  | `user:${string}:feedback:${string}`\n  | `user:${string}:score:${string}`\n  | `user:${string}:activity:${string}`\n  | `user:${string}:settings`;\n\nexport interface DBOperations {\n  get<T>(key: DBKey): Promise<T | null>;\n  set<T>(key: DBKey, value: T): Promise<void>;\n  delete(key: DBKey): Promise<void>;\n  list(prefix: string): Promise<DBKey[]>;\n}\n\nexport type ProfileKey = `user:${string}:profile`;\nexport type PlanKey = `user:${string}:plan:${string}`;\nexport type FeedbackKey = `user:${string}:feedback:${string}`;\nexport type ScoreKey = `user:${string}:score:${string}`;\nexport type ActivityKey = `user:${string}:activity:${string}`;\nexport type SettingsKey = `user:${string}:settings`;\n\nexport interface Repository<T> {\n  get(key: string): Promise<T | null>;\n  set(key: string, value: T): Promise<void>;\n  delete(key: string): Promise<void>;\n  list(prefix: string): Promise<T[]>;\n}\n\nexport type ProfileRepository = Repository<UserProfile>;\nexport type PlanRepository = Repository<DailyPlan>;\nexport type FeedbackRepository = Repository<Feedback>;\nexport type ScoreRepository = Repository<ProductivityScore>;\nexport type ActivityRepository = Repository<ActivityPattern>;\nexport type SettingsRepository = Repository<UserSettings>;\n","size_bytes":1602},"next.config.ts":{"content":"import type { NextConfig } from \"next\";\n\nconst nextConfig: NextConfig = {\n  typescript: {\n    ignoreBuildErrors: false,\n  },\n  eslint: {\n    ignoreDuringBuilds: false,\n  },\n};\n\nexport default nextConfig;\n","size_bytes":204},"stores/auth.ts":{"content":"import { create } from 'zustand';\n\ninterface AuthState {\n  isAuthenticated: boolean;\n  userId: string | null;\n  isGuest: boolean;\n  setAuth: (userId: string, isGuest: boolean) => void;\n  logout: () => void;\n}\n\nexport const useAuthStore = create<AuthState>((set) => ({\n  isAuthenticated: false,\n  userId: null,\n  isGuest: false,\n  setAuth: (userId: string, isGuest: boolean) =>\n    set({ isAuthenticated: true, userId, isGuest }),\n  logout: () => set({ isAuthenticated: false, userId: null, isGuest: false }),\n}));\n","size_bytes":514},"app/api/user/profile/route.ts":{"content":"import { NextRequest } from 'next/server';\nimport { userRepo } from '@/lib/db/repository';\nimport { getUserId, unauthorized, notFound, serverError, success } from '@/lib/api-utils';\nimport { UserProfile } from '@/types/shared';\n\nexport async function GET() {\n  try {\n    const userId = await getUserId();\n    \n    if (!userId) {\n      return unauthorized();\n    }\n\n    const result = await userRepo.getProfile(userId);\n    \n    if (!result.ok) {\n      if (result.error === 'Key not found') {\n        return notFound('User profile not found');\n      }\n      console.error('Database error:', result.error);\n      return serverError('Failed to fetch user profile');\n    }\n\n    return success(result.value);\n  } catch (error) {\n    console.error('Error fetching user profile:', error);\n    return serverError();\n  }\n}\n\nexport async function PUT(request: NextRequest) {\n  try {\n    const userId = await getUserId();\n    \n    if (!userId) {\n      return unauthorized();\n    }\n\n    const body = await request.json();\n    \n    const profile: UserProfile = {\n      userId,\n      occupation: body.occupation,\n      focusScale: body.focusScale,\n      peakHours: body.peakHours,\n      habits: body.habits,\n      routine: body.routine,\n      colorGradient: body.colorGradient,\n      createdAt: body.createdAt || new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n    };\n\n    const result = await userRepo.saveProfile(userId, profile);\n    \n    if (!result.ok) {\n      return serverError('Failed to save user profile');\n    }\n\n    return success(profile);\n  } catch (error) {\n    console.error('Error updating user profile:', error);\n    return serverError();\n  }\n}\n","size_bytes":1670},"components/ui/button.tsx":{"content":"import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\";\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nButton.displayName = \"Button\";\n\nexport { Button, buttonVariants };\n","size_bytes":1912},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nconst config: Config = {\n  darkMode: [\"class\"],\n  content: [\n    \"./pages/**/*.{js,ts,jsx,tsx,mdx}\",\n    \"./components/**/*.{js,ts,jsx,tsx,mdx}\",\n    \"./app/**/*.{js,ts,jsx,tsx,mdx}\",\n  ],\n  theme: {\n    extend: {\n      colors: {\n        background: \"hsl(var(--background))\",\n        foreground: \"hsl(var(--foreground))\",\n        card: {\n          DEFAULT: \"hsl(var(--card))\",\n          foreground: \"hsl(var(--card-foreground))\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover))\",\n          foreground: \"hsl(var(--popover-foreground))\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary))\",\n          foreground: \"hsl(var(--primary-foreground))\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary))\",\n          foreground: \"hsl(var(--secondary-foreground))\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted))\",\n          foreground: \"hsl(var(--muted-foreground))\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent))\",\n          foreground: \"hsl(var(--accent-foreground))\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive))\",\n          foreground: \"hsl(var(--destructive-foreground))\",\n        },\n        border: \"hsl(var(--border))\",\n        input: \"hsl(var(--input))\",\n        ring: \"hsl(var(--ring))\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1))\",\n          \"2\": \"hsl(var(--chart-2))\",\n          \"3\": \"hsl(var(--chart-3))\",\n          \"4\": \"hsl(var(--chart-4))\",\n          \"5\": \"hsl(var(--chart-5))\",\n        },\n      },\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\")],\n};\n\nexport default config;\n","size_bytes":1823},"components/ui/toast.tsx":{"content":"import * as React from \"react\";\nimport * as ToastPrimitives from \"@radix-ui/react-toast\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\nimport { X } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst ToastProvider = ToastPrimitives.Provider;\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n));\nToastViewport.displayName = ToastPrimitives.Viewport.displayName;\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n);\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  );\n});\nToast.displayName = ToastPrimitives.Root.displayName;\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n));\nToastAction.displayName = ToastPrimitives.Action.displayName;\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n));\nToastClose.displayName = ToastPrimitives.Close.displayName;\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n));\nToastTitle.displayName = ToastPrimitives.Title.displayName;\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n));\nToastDescription.displayName = ToastPrimitives.Description.displayName;\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>;\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>;\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n};\n","size_bytes":4868},"app/page.tsx":{"content":"export default function Home() {\n  return (\n    <div className=\"min-h-screen flex flex-col items-center justify-center p-8 bg-gradient-to-br from-blue-50 to-indigo-100\">\n      <div className=\"max-w-4xl w-full bg-white rounded-2xl shadow-xl p-12\">\n        <div className=\"text-center space-y-6\">\n          <h1 className=\"text-5xl font-bold text-gray-900\">\n            üö® FlowMate - Phased Development\n          </h1>\n          \n          <div className=\"bg-yellow-50 border-2 border-yellow-400 rounded-lg p-6 text-left\">\n            <h2 className=\"text-2xl font-semibold text-yellow-900 mb-4\">\n              ‚ö†Ô∏è IMPORTANT: Read Before Building\n            </h2>\n            <p className=\"text-yellow-800 mb-4\">\n              This project uses a <strong>multi-phase development approach</strong>. \n              Do not start building immediately!\n            </p>\n            <ol className=\"list-decimal list-inside space-y-2 text-yellow-900\">\n              <li>Read <code className=\"bg-yellow-200 px-2 py-1 rounded\">DEVELOPMENT.md</code> - Workflow instructions</li>\n              <li>Read <code className=\"bg-yellow-200 px-2 py-1 rounded\">PHASES.md</code> - Phase breakdown</li>\n              <li>Check <code className=\"bg-yellow-200 px-2 py-1 rounded\">.phase-status.json</code> - Current status</li>\n              <li>Ask the agent: \"Which phase should I work on?\"</li>\n              <li>Claim your phase and create a branch</li>\n            </ol>\n          </div>\n\n          <div className=\"grid md:grid-cols-3 gap-4 mt-8\">\n            <a \n              href=\"https://github.com/your-repo/blob/main/DEVELOPMENT.md\"\n              className=\"block p-6 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition\"\n            >\n              <h3 className=\"font-bold text-blue-900 mb-2\">üìã Development Guide</h3>\n              <p className=\"text-sm text-blue-700\">How to work on this project</p>\n            </a>\n            \n            <a \n              href=\"https://github.com/your-repo/blob/main/PHASES.md\"\n              className=\"block p-6 bg-purple-50 border border-purple-200 rounded-lg hover:bg-purple-100 transition\"\n            >\n              <h3 className=\"font-bold text-purple-900 mb-2\">üìä Phase Breakdown</h3>\n              <p className=\"text-sm text-purple-700\">What each phase builds</p>\n            </a>\n            \n            <a \n              href=\"https://github.com/your-repo/blob/main/replit.md\"\n              className=\"block p-6 bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 transition\"\n            >\n              <h3 className=\"font-bold text-green-900 mb-2\">üèóÔ∏è Architecture</h3>\n              <p className=\"text-sm text-green-700\">Technical decisions</p>\n            </a>\n          </div>\n\n          <div className=\"mt-8 p-6 bg-gray-50 rounded-lg\">\n            <h3 className=\"text-xl font-semibold text-gray-900 mb-3\">Development Phases</h3>\n            <div className=\"space-y-2 text-left\">\n              <div className=\"flex items-center justify-between p-3 bg-white rounded border\">\n                <span className=\"font-medium\">Phase 1: Foundation & DevOps</span>\n                <span className=\"text-sm bg-green-500 text-white px-3 py-1 rounded\">‚úì Completed</span>\n              </div>\n              <div className=\"flex items-center justify-between p-3 bg-white rounded border\">\n                <span className=\"font-medium\">Phase 2: Auth & Data Layer</span>\n                <span className=\"text-sm bg-green-500 text-white px-3 py-1 rounded\">‚úì Completed</span>\n              </div>\n              <div className=\"flex items-center justify-between p-3 bg-white rounded border\">\n                <span className=\"font-medium\">Phase 3: Core UI Components</span>\n                <span className=\"text-sm bg-green-500 text-white px-3 py-1 rounded\">‚úì Completed</span>\n              </div>\n              <div className=\"flex items-center justify-between p-3 bg-white rounded border\">\n                <span className=\"font-medium\">Phase 4: AI Integration</span>\n                <span className=\"text-sm bg-gray-200 px-3 py-1 rounded\">Not Started</span>\n              </div>\n              <div className=\"flex items-center justify-between p-3 bg-white rounded border\">\n                <span className=\"font-medium\">Phase 5: Analytics & Polish</span>\n                <span className=\"text-sm bg-gray-200 px-3 py-1 rounded\">Not Started</span>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"mt-8 text-sm text-gray-600\">\n            <p>Total estimated time: <strong>10.5-13 days</strong></p>\n            <p className=\"mt-2\">This page will be replaced once development begins</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":4757},"replit.md":{"content":"# FlowMate - Project Overview & Architecture\n\n### Overview\nFlowMate is an AI-powered productivity assistant designed to generate personalized daily schedules. It optimizes time allocation and enhances productivity by learning from user behavior, task lists, and calendar events. The project aims to provide an AI-first planning experience, helping users maximize their productive hours and manage their daily routines effectively.\n\n### Development Progress\n\n**‚úì Phase 1 Completed (2025-11-08):**\n- Next.js 15 project setup with TypeScript and Tailwind CSS\n- shadcn/ui components (Button, Card, Input, etc.)\n- Zustand stores for auth, user, and plan state management\n- Type-safe mock data system\n- Dev server configured on port 5000\n\n**‚úì Phase 2 Completed (2025-11-08):**\n- Clerk authentication integration (Google OAuth + Guest mode)\n- Protected route middleware with proper route matchers\n- Replit DB client with singleton pattern and safe wrappers\n- Repository pattern for all data entities (User, Plan, Feedback, Productivity, Activity, Settings)\n- Complete API route scaffolding:\n  - `/api/user/profile` (GET, PUT) - user profile management\n  - `/api/user/onboarding` (POST) - onboarding flow\n  - `/api/plan/generate` (POST) - plan generation (mock)\n  - `/api/plan/[date]` (GET, PUT) - fetch and update daily plans\n  - `/api/feedback` (POST, GET) - feedback submission and retrieval\n  - `/api/settings` (GET, PUT) - user settings management\n- Error handling with proper 404 vs 500 distinction\n- Database documentation in `lib/db/README.md`\n\n**‚úì Phase 4 Completed (2025-11-08):**\n- Google Gemini AI client with lazy loading and rate limiting (15 req/min)\n- AI plan generation with personalized prompts based on user profile, feedback, and activity patterns\n- Streaming AI chat interface with command detection and mock mode support\n- Feedback toast system that triggers 2 minutes before task completion\n- Pattern analysis: productivity scoring, hourly activity patterns, and feedback aggregation\n- Analytics API endpoints for calculating scores and retrieving insights\n- Feature flag support (NEXT_PUBLIC_MOCK_AI) for keyless development\n- Full integration with Phase 1-3 components and database layer\n\n**Next Phase:** Phase 5 - Analytics, Settings & Polish\n\n### User Preferences\n- **Development Approach:** Phased development with clear ownership.\n- **Communication:** All architectural decisions should be documented.\n- **Code Style:** Adhere to TypeScript strict mode and ESLint enforcement.\n- **Commits:** Commit messages should be descriptive and include a phase prefix.\n- **Code Conventions:**\n    - Use functional components exclusively (no class components).\n    - Prefer server components, using 'use client' only when absolutely necessary.\n    - File names should be in kebab-case (e.g., `user-profile.tsx`).\n    - Export only one main component per file.\n    - Co-locate types with components if they are component-specific.\n\n### System Architecture\n\n**UI/UX Decisions:**\n- **Styling:** Tailwind CSS and shadcn/ui for rapid development, consistent design, and accessible components.\n- **Calendar:** React Big Calendar for customizable date picking and badging.\n- **Charts:** Recharts for native React charting, composable and well-documented.\n\n**Technical Implementations:**\n- **Frontend Framework:** Next.js 15 with App Router for server-side rendering, built-in API routes, and strong TypeScript support.\n- **Language:** TypeScript for type safety, improved developer experience, and better code maintainability.\n- **State Management:** Zustand for its simplicity, TypeScript-first approach, and minimal boilerplate. Optimistic UI updates are used for a responsive user experience.\n- **Monorepo:** Frontend and backend are combined in a single Next.js project for simplified deployment, shared types, and faster development.\n- **AI-First Plan Generation:** The AI generates plans only for the *next* day to prevent mid-day disruptions, allow user review, and streamline the feedback loop.\n- **Authentication:** Clerk is used for authentication, offering a free tier, Google OAuth, guest mode, and seamless Next.js integration.\n- **API Design:** Follows REST conventions with consistent error handling and requires Clerk session for authenticated routes.\n- **Performance:** Focus on bundle size reduction (dynamic imports, tree-shaking, lazy loading), SWR pattern for data caching, and prefetching.\n- **Security:** API keys are stored in environment variables, user data is scoped by `userId` to prevent leakage, and all API inputs are validated with Zod schemas.\n\n**Feature Specifications:**\n- Personalized daily schedules based on user profile, historical feedback, calendar events, and activity patterns.\n- Task management within the generated plan (CRUD operations).\n- Feedback mechanism for focus and completion rates.\n- Daily productivity scoring.\n- User settings for notifications, appearance, and privacy.\n\n### External Dependencies\n\n- **Database:** Replit DB (Key-Value Store) for its simplicity, built-in rollback support, and suitability for MVP requirements.\n- **AI:** Google Gemini API for AI plan generation, leveraging its free tier and structured output capabilities.\n- **Authentication:** Clerk for user authentication and authorization.\n- **Deployment:** Replit Autoscale for zero-config, automatic scaling, and rollback features.","size_bytes":5369},"README.md":{"content":"# üö® IMPORTANT: DO NOT BUILD YET - READ THIS FIRST\n\n## FlowMate - AI-Powered Productivity Assistant\n\n**FlowMate** is an AI assistant that optimizes your day based on your **focus patterns, habits, and calendar activity**. It learns how you work best and builds a personalized **time-flow plan** for each day ‚Äî helping you maintain deep focus, avoid burnout, and maximize productive hours.\n\n---\n\n## ‚ö†Ô∏è FOR DEVELOPERS: READ BEFORE STARTING\n\nThis project uses a **phased development approach** designed for multiple team members to work in parallel without conflicts.\n\n### üõë BEFORE YOU RUN `npm install`:\n\n1. **Read the documentation:**\n   - üìã **[DEVELOPMENT.md](./DEVELOPMENT.md)** - Start here! Contains workflow instructions\n   - üìä **[PHASES.md](./PHASES.md)** - Detailed breakdown of all 5 phases\n   - üèóÔ∏è **[replit.md](./replit.md)** - Architecture decisions and project overview\n\n2. **Check phase status:**\n   - Open `.phase-status.json` to see what's available\n   - Ensure dependencies are met before claiming a phase\n\n3. **Ask for guidance:**\n   - Use Replit Agent: \"Which phase should I work on?\"\n   - Agent will analyze current status and recommend next steps\n\n4. **Claim your phase:**\n   - Update `.phase-status.json` with your name\n   - Create branch: `git checkout -b phase-X-your-name`\n   - Follow conflict prevention rules in DEVELOPMENT.md\n\n### üìö Quick Links\n- üöÄ **[QUICKSTART.md](./QUICKSTART.md)** - **START HERE!** Step-by-step first actions\n- [Development Workflow](./DEVELOPMENT.md) - How to work on this project\n- [Phase Breakdown](./PHASES.md) - What each phase builds\n- [Architecture](./replit.md) - Technical decisions and setup\n\n---\n\n## Project Overview\n\n### Tech Stack\n- **Frontend:** Next.js 15 (App Router) + TypeScript + Tailwind CSS\n- **Backend:** Next.js API Routes\n- **Database:** Replit DB (Key-Value Store)\n- **AI:** Google Gemini API (100% Free)\n- **Auth:** Clerk (Google OAuth + Guest Mode)\n- **State:** Zustand\n- **Charts:** Recharts\n\n### Core Features\n1. **AI Timesheet Generation** - Tomorrow's optimized schedule\n2. **Feedback Loop** - Focus ratings improve future plans\n3. **Interactive Timeline** - Edit tasks, set priorities (1.0-5.0)\n4. **Analytics Dashboard** - 30-day trends, heatmaps, insights\n5. **Smart Learning** - AI adapts to your productivity patterns\n\n### Development Phases\n\n| Phase | Focus | Time | Status |\n|-------|-------|------|--------|\n| **Phase 1** | Foundation & DevOps | 1.5-2 days | Not Started |\n| **Phase 2** | Auth & Data Layer | 2-2.5 days | Not Started |\n| **Phase 3** | Core UI Components | 3-3.5 days | Not Started |\n| **Phase 4** | AI Integration | 2-3 days | Not Started |\n| **Phase 5** | Analytics & Polish | 2 days | Not Started |\n\n**Total:** 10.5-13 days for full MVP\n\n---\n\n## Getting Started (After Reading Docs!)\n\n### Prerequisites\n- Node.js 20+\n- npm or yarn\n- Replit account (for deployment)\n- Clerk account (for auth)\n- Google Gemini API key (free)\n\n### Installation\n```bash\n# 1. Clone and read docs first!\ngit clone <repo-url>\ncd flowmate\n\n# 2. Read the documentation\ncat DEVELOPMENT.md\n\n# 3. Check phase status\ncat .phase-status.json\n\n# 4. Ask agent which phase to work on\n# (Use Replit Agent or your AI assistant)\n\n# 5. Install dependencies\nnpm install\n\n# 6. Set up environment variables\ncp .env.example .env.local\n# Add your API keys (see DEVELOPMENT.md)\n\n# 7. Run development server\nnpm run dev\n# Server will start on http://0.0.0.0:5000\n```\n\n### Environment Variables\n```bash\n# Required for Phase 2+\nNEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_...\nCLERK_SECRET_KEY=sk_test_...\n\n# Required for Phase 4+\nGOOGLE_GEMINI_API_KEY=...\n\n# Replit (auto-provided in Replit environment)\nREPLIT_DB_URL=...\n\n# Feature Flags (for phased development)\nNEXT_PUBLIC_ENABLE_AI=false\nNEXT_PUBLIC_MOCK_DATA=true\n```\n\n---\n\n## Project Structure\n\n```\nflowmate/\n‚îú‚îÄ‚îÄ app/                      # Next.js app directory\n‚îÇ   ‚îú‚îÄ‚îÄ (dashboard)/         # Main app routes (Phase 3)\n‚îÇ   ‚îú‚îÄ‚îÄ api/                 # API routes (Phase 2)\n‚îÇ   ‚îú‚îÄ‚îÄ analytics/           # Analytics pages (Phase 5)\n‚îÇ   ‚îî‚îÄ‚îÄ onboarding/          # Onboarding flow (Phase 3)\n‚îú‚îÄ‚îÄ components/              # React components\n‚îÇ   ‚îú‚îÄ‚îÄ ui/                  # Base components (Phase 1)\n‚îÇ   ‚îú‚îÄ‚îÄ calendar/            # Calendar (Phase 3)\n‚îÇ   ‚îú‚îÄ‚îÄ timeline/            # Timeline (Phase 3)\n‚îÇ   ‚îî‚îÄ‚îÄ chat/                # AI chat (Phase 4)\n‚îú‚îÄ‚îÄ lib/                     # Utilities\n‚îÇ   ‚îú‚îÄ‚îÄ db/                  # Database (Phase 2)\n‚îÇ   ‚îî‚îÄ‚îÄ ai/                  # AI client (Phase 4)\n‚îú‚îÄ‚îÄ stores/                  # Zustand stores (Phase 1)\n‚îú‚îÄ‚îÄ types/                   # TypeScript types (Phase 1)\n‚îú‚îÄ‚îÄ PHASES.md                # Phase breakdown\n‚îú‚îÄ‚îÄ DEVELOPMENT.md           # Development guide\n‚îî‚îÄ‚îÄ replit.md                # Architecture docs\n```\n\n---\n\n## Key Features Breakdown\n\n### 1. Focus Mode Timeline\n- Hourly grid (3 AM ‚Üí 3 AM next day)\n- Color-coded priorities (1.0-5.0 scale)\n- Edit upcoming tasks, lock past events\n- Drag-and-drop scheduling (optional)\n\n### 2. AI Plan Generation\n- Generates tomorrow's plan only\n- Uses: profile, habits, peak hours, past feedback\n- Learns from focus ratings over time\n- Chat commands: \"Move meeting to 2 PM\"\n\n### 3. Feedback System\n- Toast appears 2 mins before task ends\n- Collects: Focus (1-10), Completion (%), Notes\n- Stores for pattern analysis\n- Improves future AI suggestions\n\n### 4. Analytics Dashboard\n- 30-day productivity trend\n- Weekly heatmap\n- Time-of-day activity graph\n- Focus vs. completion scatter plot\n- AI-generated insights\n\n### 5. Smart Learning\n- Identifies peak performance hours\n- Detects habit correlations (e.g., coffee ‚Üí focus boost)\n- Suggests optimal break times\n- Adapts to changing patterns\n\n---\n\n## Development Rules\n\n### Conflict Prevention\n1. **File Ownership:** Only edit files your phase owns\n2. **Shared Types:** Import from `/types/shared.ts`\n3. **Feature Flags:** Use for incomplete features\n4. **Mock Services:** Don't block on other phases\n\n### Branching Strategy\n- Main branch: `main` (protected)\n- Phase branches: `phase-1`, `phase-2`, etc.\n- Personal branches: `phase-X-your-name`\n- Merge only when phase complete\n\n### Communication\n- Update `.phase-status.json` when starting/completing\n- Leave TODO comments with your name\n- Document deviations in commit messages\n- Ask agent for guidance when stuck\n\n---\n\n## Testing\n\n### Run Tests\n```bash\n# Lint\nnpm run lint\n\n# Type check\nnpm run build\n\n# Local testing\nnpm run dev\n```\n\n### Phase-Specific Testing\nEach phase has acceptance criteria in `PHASES.md`:\n- Phase 1: Server starts, no errors\n- Phase 2: Auth works, DB CRUD functional\n- Phase 3: UI interactive, state persists\n- Phase 4: AI generates plans, feedback stores\n- Phase 5: Charts render, settings save\n\n---\n\n## Deployment\n\n### Deploy to Replit\n1. Complete all phases\n2. Set production environment variables\n3. Run production build: `npm run build`\n4. Deploy via Replit interface\n5. Test at `<your-repl>.replit.app`\n\n### Production Checklist\n- [ ] All environment variables set\n- [ ] Production build succeeds\n- [ ] Auth flows work\n- [ ] Database connections stable\n- [ ] AI API key valid\n- [ ] Charts render with real data\n\n---\n\n## Cost Analysis\n\n**Total MVP Cost: $0/month** üéâ\n\n- Next.js: Free (self-hosted)\n- Replit DB: Free (basic tier)\n- Clerk Auth: Free (10K MAU)\n- Google Gemini: Free (250 req/day)\n- Replit Deployment: Free (Autoscale tier)\n\n---\n\n## Support\n\n### Questions?\n1. Check `DEVELOPMENT.md` for workflow\n2. Check `PHASES.md` for phase details\n3. Check `replit.md` for architecture\n4. Ask Replit Agent: \"Help me with [specific issue]\"\n5. Create GitHub issue if needed\n\n### Common Issues\n- **Port conflicts:** Ensure using port 5000\n- **Type errors:** Import from `/types/shared.ts`\n- **Merge conflicts:** Follow file ownership rules\n- **Missing API keys:** Check `.env.example`\n\n---\n\n## Contributing\n\nThis is a hackathon MVP built with phased development. Follow these steps:\n\n1. Read `DEVELOPMENT.md` thoroughly\n2. Check `.phase-status.json` for availability\n3. Ask agent which phase to work on\n4. Claim phase and create branch\n5. Build according to `PHASES.md` specifications\n6. Test against acceptance criteria\n7. Create PR when complete\n8. Update phase status to \"completed\"\n\n**Remember:** Communication prevents conflicts. Update status files and ask questions early!\n\n---\n\n## License\n\nMIT (or specify your license)\n\n---\n\n## Acknowledgments\n\nBuilt for [Hackathon Name] using:\n- Next.js 15\n- Google Gemini AI\n- Clerk Authentication\n- Replit Platform\n\n**Last Updated:** November 8, 2025\n\n","size_bytes":8675},"lib/api-utils.ts":{"content":"import { NextResponse } from 'next/server';\nimport { auth } from '@clerk/nextjs/server';\n\nexport async function getUserId(): Promise<string | null> {\n  const { userId } = await auth();\n  return userId;\n}\n\nexport function unauthorized() {\n  return NextResponse.json(\n    { error: 'Unauthorized', code: 'UNAUTHORIZED' },\n    { status: 401 }\n  );\n}\n\nexport function badRequest(message: string) {\n  return NextResponse.json(\n    { error: message, code: 'BAD_REQUEST' },\n    { status: 400 }\n  );\n}\n\nexport function notFound(message: string = 'Resource not found') {\n  return NextResponse.json(\n    { error: message, code: 'NOT_FOUND' },\n    { status: 404 }\n  );\n}\n\nexport function serverError(message: string = 'Internal server error') {\n  return NextResponse.json(\n    { error: message, code: 'INTERNAL_ERROR' },\n    { status: 500 }\n  );\n}\n\nexport function success<T>(data: T, status: number = 200) {\n  return NextResponse.json({ data }, { status });\n}\n","size_bytes":949},"components/ui/input.tsx":{"content":"import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nInput.displayName = \"Input\";\n\nexport { Input };\n","size_bytes":797},"app/api/user/onboarding/route.ts":{"content":"import { NextRequest } from 'next/server';\nimport { userRepo } from '@/lib/db/repository';\nimport { getUserId, unauthorized, badRequest, serverError, success } from '@/lib/api-utils';\nimport { OnboardingData, UserProfile } from '@/types/shared';\n\nexport async function POST(request: NextRequest) {\n  try {\n    const userId = await getUserId();\n    \n    if (!userId) {\n      return unauthorized();\n    }\n\n    const body: OnboardingData = await request.json();\n    \n    if (!body.occupation || !body.wakeTime || !body.sleepTime || !body.habits || !body.focusScale || !body.peakHours) {\n      return badRequest('Missing required onboarding fields');\n    }\n\n    const profile: UserProfile = {\n      userId,\n      occupation: body.occupation,\n      focusScale: body.focusScale,\n      peakHours: body.peakHours,\n      habits: body.habits,\n      routine: `Wake: ${body.wakeTime}, Sleep: ${body.sleepTime}`,\n      colorGradient: {\n        low: '#93c5fd',\n        high: '#3b82f6',\n      },\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n    };\n\n    const result = await userRepo.saveProfile(userId, profile);\n    \n    if (!result.ok) {\n      return serverError('Failed to save onboarding data');\n    }\n\n    return success({ profile, message: 'Onboarding completed successfully' }, 201);\n  } catch (error) {\n    console.error('Error processing onboarding:', error);\n    return serverError();\n  }\n}\n","size_bytes":1427},"app/globals.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  --background: 0 0% 100%;\n  --foreground: 222.2 84% 4.9%;\n  --card: 0 0% 100%;\n  --card-foreground: 222.2 84% 4.9%;\n  --popover: 0 0% 100%;\n  --popover-foreground: 222.2 84% 4.9%;\n  --primary: 222.2 47.4% 11.2%;\n  --primary-foreground: 210 40% 98%;\n  --secondary: 210 40% 96.1%;\n  --secondary-foreground: 222.2 47.4% 11.2%;\n  --muted: 210 40% 96.1%;\n  --muted-foreground: 215.4 16.3% 46.9%;\n  --accent: 210 40% 96.1%;\n  --accent-foreground: 222.2 47.4% 11.2%;\n  --destructive: 0 84.2% 60.2%;\n  --destructive-foreground: 210 40% 98%;\n  --border: 214.3 31.8% 91.4%;\n  --input: 214.3 31.8% 91.4%;\n  --ring: 222.2 84% 4.9%;\n  --radius: 0.5rem;\n  --chart-1: 12 76% 61%;\n  --chart-2: 173 58% 39%;\n  --chart-3: 197 37% 24%;\n  --chart-4: 43 74% 66%;\n  --chart-5: 27 87% 67%;\n}\n\n.dark {\n  --background: 222.2 84% 4.9%;\n  --foreground: 210 40% 98%;\n  --card: 222.2 84% 4.9%;\n  --card-foreground: 210 40% 98%;\n  --popover: 222.2 84% 4.9%;\n  --popover-foreground: 210 40% 98%;\n  --primary: 210 40% 98%;\n  --primary-foreground: 222.2 47.4% 11.2%;\n  --secondary: 217.2 32.6% 17.5%;\n  --secondary-foreground: 210 40% 98%;\n  --muted: 217.2 32.6% 17.5%;\n  --muted-foreground: 215 20.2% 65.1%;\n  --accent: 217.2 32.6% 17.5%;\n  --accent-foreground: 210 40% 98%;\n  --destructive: 0 62.8% 30.6%;\n  --destructive-foreground: 210 40% 98%;\n  --border: 217.2 32.6% 17.5%;\n  --input: 217.2 32.6% 17.5%;\n  --ring: 212.7 26.8% 83.9%;\n  --chart-1: 220 70% 50%;\n  --chart-2: 160 60% 45%;\n  --chart-3: 30 80% 55%;\n  --chart-4: 280 65% 60%;\n  --chart-5: 340 75% 55%;\n}\n\n* {\n  border-color: hsl(var(--border));\n}\n\nbody {\n  background-color: hsl(var(--background));\n  color: hsl(var(--foreground));\n}\n","size_bytes":1736},"stores/feedback.ts":{"content":"import { create } from 'zustand';\nimport { Feedback, ProductivityScore } from '@/types/shared';\n\ninterface FeedbackState {\n  pendingFeedback: { taskId: string; taskTitle: string; endTime: string } | null;\n  recentFeedback: Feedback[];\n  setPendingFeedback: (feedback: { taskId: string; taskTitle: string; endTime: string } | null) => void;\n  submitFeedback: (feedback: Feedback) => void;\n  clearPendingFeedback: () => void;\n  loadRecentFeedback: (feedback: Feedback[]) => void;\n}\n\ninterface ProductivityScoresState {\n  scores: Record<string, ProductivityScore>;\n  setScores: (scores: Record<string, ProductivityScore>) => void;\n  updateScore: (date: string, score: ProductivityScore) => void;\n}\n\nexport const useFeedbackStore = create<FeedbackState>((set) => ({\n  pendingFeedback: null,\n  recentFeedback: [],\n  setPendingFeedback: (feedback) => set({ pendingFeedback: feedback }),\n  submitFeedback: (feedback) =>\n    set((state) => ({\n      recentFeedback: [feedback, ...state.recentFeedback].slice(0, 50),\n      pendingFeedback: null,\n    })),\n  clearPendingFeedback: () => set({ pendingFeedback: null }),\n  loadRecentFeedback: (feedback) => set({ recentFeedback: feedback }),\n}));\n\nexport const useProductivityScores = create<ProductivityScoresState>((set) => ({\n  scores: {},\n  setScores: (scores) => set({ scores }),\n  updateScore: (date, score) =>\n    set((state) => ({\n      scores: { ...state.scores, [date]: score },\n    })),\n}));\n","size_bytes":1439},"stores/plan.ts":{"content":"import { create } from 'zustand';\nimport { DailyPlan, Task } from '@/types/shared';\n\ninterface PlanState {\n  currentPlan: DailyPlan | null;\n  selectedDate: string;\n  isLoading: boolean;\n  setCurrentPlan: (plan: DailyPlan) => void;\n  updateTask: (taskId: string, updates: Partial<Task>) => void;\n  addTask: (task: Task) => void;\n  removeTask: (taskId: string) => void;\n  setSelectedDate: (date: string) => void;\n  setLoading: (isLoading: boolean) => void;\n  clearPlan: () => void;\n}\n\nexport const usePlanStore = create<PlanState>((set) => ({\n  currentPlan: null,\n  selectedDate: new Date().toISOString().split('T')[0],\n  isLoading: false,\n  setCurrentPlan: (plan) => set({ currentPlan: plan }),\n  updateTask: (taskId, updates) =>\n    set((state) => ({\n      currentPlan: state.currentPlan\n        ? {\n            ...state.currentPlan,\n            tasks: state.currentPlan.tasks.map((task) =>\n              task.id === taskId ? { ...task, ...updates } : task\n            ),\n            lastModified: new Date().toISOString(),\n          }\n        : null,\n    })),\n  addTask: (task) =>\n    set((state) => ({\n      currentPlan: state.currentPlan\n        ? {\n            ...state.currentPlan,\n            tasks: [...state.currentPlan.tasks, task],\n            lastModified: new Date().toISOString(),\n          }\n        : null,\n    })),\n  removeTask: (taskId) =>\n    set((state) => ({\n      currentPlan: state.currentPlan\n        ? {\n            ...state.currentPlan,\n            tasks: state.currentPlan.tasks.filter((task) => task.id !== taskId),\n            lastModified: new Date().toISOString(),\n          }\n        : null,\n    })),\n  setSelectedDate: (date) => set({ selectedDate: date }),\n  setLoading: (isLoading) => set({ isLoading }),\n  clearPlan: () => set({ currentPlan: null }),\n}));\n","size_bytes":1791},"app/api/plan/generate/route.ts":{"content":"import { NextRequest } from 'next/server';\nimport { planRepo, userRepo, feedbackRepo, activityRepo } from '@/lib/db/repository';\nimport { getUserId, unauthorized, badRequest, serverError, success } from '@/lib/api-utils';\nimport { DailyPlan, Task } from '@/types/shared';\nimport { generateMockTasks } from '@/lib/mock-data';\nimport { generateDailyPlan } from '@/lib/ai';\n\nconst USE_MOCK_AI = process.env.NEXT_PUBLIC_MOCK_AI === 'true';\n\nexport async function POST(request: NextRequest) {\n  try {\n    const userId = await getUserId();\n    \n    if (!userId) {\n      return unauthorized();\n    }\n\n    const body = await request.json();\n    const { date } = body;\n    \n    if (!date) {\n      return badRequest('Date is required');\n    }\n\n    const profileResult = await userRepo.getProfile(userId);\n    \n    if (!profileResult.ok || !profileResult.value) {\n      return badRequest('User profile not found. Complete onboarding first.');\n    }\n\n    let tasks: Task[];\n\n    if (USE_MOCK_AI) {\n      tasks = generateMockTasks(date, 6);\n    } else {\n      const feedbackResult = await feedbackRepo.getAllUserFeedback(userId);\n      const historicalFeedback = feedbackResult.ok && feedbackResult.value ? feedbackResult.value : [];\n\n      const activitiesListResult = await activityRepo.listUserActivities(userId);\n      const activityPatterns = [];\n      \n      if (activitiesListResult.ok && activitiesListResult.value) {\n        const recentActivityKeys = activitiesListResult.value.slice(-7);\n        for (const key of recentActivityKeys) {\n          const activityDate = key.split(':').pop();\n          if (activityDate) {\n            const activityResult = await activityRepo.getActivity(userId, activityDate);\n            if (activityResult.ok && activityResult.value) {\n              activityPatterns.push(activityResult.value);\n            }\n          }\n        }\n      }\n\n      const aiResult = await generateDailyPlan(\n        profileResult.value,\n        historicalFeedback,\n        activityPatterns,\n        date\n      );\n\n      if (aiResult.error) {\n        return serverError(aiResult.error);\n      }\n\n      tasks = aiResult.data || [];\n    }\n    \n    const plan: DailyPlan = {\n      date,\n      tasks,\n      generatedAt: new Date().toISOString(),\n      lastModified: new Date().toISOString(),\n    };\n\n    const result = await planRepo.savePlan(userId, date, plan);\n    \n    if (!result.ok) {\n      return serverError('Failed to save generated plan');\n    }\n\n    return success({ \n      plan,\n      message: USE_MOCK_AI \n        ? 'Plan generated successfully (using mock AI - set NEXT_PUBLIC_MOCK_AI=false for real AI)'\n        : 'Plan generated successfully with AI'\n    }, 201);\n  } catch (error) {\n    console.error('Error generating plan:', error);\n    return serverError();\n  }\n}\n","size_bytes":2790},"stores/user.ts":{"content":"import { create } from 'zustand';\nimport { UserProfile, UserSettings } from '@/types/shared';\n\ninterface UserState {\n  profile: UserProfile | null;\n  settings: UserSettings | null;\n  setProfile: (profile: UserProfile) => void;\n  updateProfile: (updates: Partial<UserProfile>) => void;\n  setSettings: (settings: UserSettings) => void;\n  updateSettings: (updates: Partial<UserSettings>) => void;\n  clearUser: () => void;\n}\n\nexport const useUserStore = create<UserState>((set) => ({\n  profile: null,\n  settings: null,\n  setProfile: (profile) => set({ profile }),\n  updateProfile: (updates) =>\n    set((state) => ({\n      profile: state.profile ? { ...state.profile, ...updates } : null,\n    })),\n  setSettings: (settings) => set({ settings }),\n  updateSettings: (updates) =>\n    set((state) => ({\n      settings: state.settings ? { ...state.settings, ...updates } : null,\n    })),\n  clearUser: () => set({ profile: null, settings: null }),\n}));\n","size_bytes":942},"components/ui/label.tsx":{"content":"import * as React from \"react\";\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n);\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n));\nLabel.displayName = LabelPrimitive.Root.displayName;\n\nexport { Label };\n","size_bytes":718},"app/api/feedback/route.ts":{"content":"import { NextRequest } from 'next/server';\nimport { feedbackRepo, productivityRepo } from '@/lib/db/repository';\nimport { getUserId, unauthorized, badRequest, serverError, success } from '@/lib/api-utils';\nimport { Feedback } from '@/types/shared';\n\nexport async function POST(request: NextRequest) {\n  try {\n    const userId = await getUserId();\n    \n    if (!userId) {\n      return unauthorized();\n    }\n\n    const body = await request.json();\n    \n    if (!body.taskId || body.focusRating === undefined || body.completionPercent === undefined) {\n      return badRequest('Missing required feedback fields');\n    }\n\n    const feedback: Feedback = {\n      taskId: body.taskId,\n      focusRating: body.focusRating,\n      completionPercent: body.completionPercent,\n      textFeedback: body.textFeedback,\n      timestamp: new Date().toISOString(),\n      taskDate: body.taskDate || new Date().toISOString().split('T')[0],\n    };\n\n    const result = await feedbackRepo.saveFeedback(userId, body.taskId, feedback);\n    \n    if (!result.ok) {\n      return serverError('Failed to save feedback');\n    }\n\n    return success({ feedback, message: 'Feedback submitted successfully' }, 201);\n  } catch (error) {\n    console.error('Error submitting feedback:', error);\n    return serverError();\n  }\n}\n\nexport async function GET() {\n  try {\n    const userId = await getUserId();\n    \n    if (!userId) {\n      return unauthorized();\n    }\n\n    const result = await feedbackRepo.getAllUserFeedback(userId);\n    \n    if (!result.ok) {\n      return serverError('Failed to fetch feedback');\n    }\n\n    return success(result.value || []);\n  } catch (error) {\n    console.error('Error fetching feedback:', error);\n    return serverError();\n  }\n}\n","size_bytes":1724},"lib/mock-data.ts":{"content":"import { UserProfile, Task, DailyPlan, Feedback, ProductivityScore, ActivityPattern, UserSettings } from '@/types/shared';\n\nexport const mockUserProfile: UserProfile = {\n  userId: 'mock-user-123',\n  occupation: 'Software Developer',\n  focusScale: 7,\n  peakHours: ['09:00', '10:00', '14:00', '15:00'],\n  habits: ['Morning Exercise', 'Coffee Break', 'Afternoon Walk', 'Reading'],\n  routine: 'Early bird - most productive in mornings',\n  colorGradient: {\n    low: '#93c5fd',\n    high: '#3b82f6',\n  },\n  createdAt: '2025-11-01T00:00:00Z',\n  updatedAt: '2025-11-08T00:00:00Z',\n};\n\nexport const mockTasks: Task[] = [\n  {\n    id: 'task-1',\n    time: '09:00',\n    duration: 90,\n    title: 'Code review and PR merges',\n    priority: 4.0,\n    completed: true,\n    source: 'ai',\n  },\n  {\n    id: 'task-2',\n    time: '10:30',\n    duration: 60,\n    title: 'Team standup meeting',\n    priority: 2.5,\n    completed: true,\n    source: 'calendar',\n  },\n  {\n    id: 'task-3',\n    time: '11:30',\n    duration: 120,\n    title: 'Feature development - User dashboard',\n    priority: 5.0,\n    completed: false,\n    source: 'ai',\n  },\n  {\n    id: 'task-4',\n    time: '13:30',\n    duration: 30,\n    title: 'Lunch break',\n    priority: 1.0,\n    completed: false,\n    source: 'user',\n  },\n  {\n    id: 'task-5',\n    time: '14:00',\n    duration: 90,\n    title: 'Documentation update',\n    priority: 3.0,\n    completed: false,\n    source: 'ai',\n  },\n  {\n    id: 'task-6',\n    time: '15:30',\n    duration: 60,\n    title: 'Bug fixing - Authentication flow',\n    priority: 4.5,\n    completed: false,\n    source: 'user',\n  },\n];\n\nexport const mockDailyPlan: DailyPlan = {\n  date: new Date().toISOString().split('T')[0],\n  tasks: mockTasks,\n  generatedAt: new Date().toISOString(),\n  lastModified: new Date().toISOString(),\n};\n\nexport const mockFeedback: Feedback[] = [\n  {\n    taskId: 'task-1',\n    focusRating: 8,\n    completionPercent: 95,\n    textFeedback: 'Productive session, completed all PRs',\n    timestamp: '2025-11-08T10:30:00Z',\n    taskDate: '2025-11-08',\n  },\n  {\n    taskId: 'task-2',\n    focusRating: 6,\n    completionPercent: 100,\n    textFeedback: 'Good meeting, clear action items',\n    timestamp: '2025-11-08T11:30:00Z',\n    taskDate: '2025-11-08',\n  },\n];\n\nexport const mockProductivityScores: ProductivityScore[] = Array.from({ length: 30 }, (_, i) => {\n  const date = new Date();\n  date.setDate(date.getDate() - (29 - i));\n  const score = 50 + Math.random() * 40;\n  \n  return {\n    date: date.toISOString().split('T')[0],\n    score: Math.round(score),\n    totalTasks: Math.floor(4 + Math.random() * 6),\n    completedTasks: Math.floor(3 + Math.random() * 5),\n    avgFocus: Math.round(5 + Math.random() * 4),\n    avgCompletion: Math.round(60 + Math.random() * 35),\n    calculatedAt: date.toISOString(),\n  };\n});\n\nexport const mockActivityPattern: ActivityPattern = {\n  date: new Date().toISOString().split('T')[0],\n  hourly: {\n    '09': { focus: 8, activity: 'coding', completion: 90 },\n    '10': { focus: 7, activity: 'meeting', completion: 100 },\n    '11': { focus: 9, activity: 'coding', completion: 85 },\n    '13': { focus: 5, activity: 'lunch', completion: 100 },\n    '14': { focus: 7, activity: 'documentation', completion: 75 },\n    '15': { focus: 8, activity: 'bug-fixing', completion: 80 },\n  },\n};\n\nexport const mockUserSettings: UserSettings = {\n  notifications: {\n    email: true,\n    push: true,\n    feedbackTiming: 2,\n  },\n  appearance: {\n    darkMode: false,\n    timeFormat: '12h',\n    colorPreset: 'blue',\n  },\n  privacy: {\n    dataCollection: true,\n  },\n};\n\nexport function generateMockTasks(date: string, count: number = 6): Task[] {\n  const activities = [\n    'Code review',\n    'Feature development',\n    'Team meeting',\n    'Documentation',\n    'Bug fixing',\n    'Testing',\n    'Planning session',\n    'Client call',\n    'Research',\n    'Learning new tech',\n  ];\n  \n  const validPriorities: Task['priority'][] = [1.0, 1.5, 2.0, 2.5, 3.0, 3.5, 4.0, 4.5, 5.0];\n  const validSources: Task['source'][] = ['ai', 'user', 'calendar'];\n  const validDurations = [30, 60, 90, 120];\n  \n  const tasks: Task[] = [];\n  let currentTime = 9;\n  \n  for (let i = 0; i < count; i++) {\n    const duration = validDurations[Math.floor(Math.random() * validDurations.length)];\n    const priority = validPriorities[Math.floor(Math.random() * validPriorities.length)];\n    const source = validSources[Math.floor(Math.random() * validSources.length)];\n    \n    tasks.push({\n      id: `task-${date}-${i}`,\n      time: `${currentTime.toString().padStart(2, '0')}:00`,\n      duration,\n      title: activities[Math.floor(Math.random() * activities.length)],\n      priority,\n      completed: Math.random() > 0.5,\n      source,\n    });\n    \n    currentTime += Math.floor(duration / 60) + 0.5;\n    if (currentTime >= 17) break;\n  }\n  \n  return tasks;\n}\n","size_bytes":4826},"PHASES.md":{"content":"# FlowMate - Development Phases\n\n## ‚ö†Ô∏è IMPORTANT: Read Before Starting\nThis project is designed to be built in **5 independent phases** that can be worked on by different team members. Before starting any work:\n\n1. Read this entire document\n2. Check `.phase-status.json` to see what's in progress\n3. Read `DEVELOPMENT.md` for workflow instructions\n4. Claim your phase before starting work\n\n---\n\n## Phase Overview\n\n| Phase | Estimated Time | Dependencies | Status |\n|-------|---------------|--------------|--------|\n| Phase 1: Foundation & DevOps | 1.5-2 days | None | Not Started |\n| Phase 2: Authentication & Data Layer | 2-2.5 days | Phase 1 | Not Started |\n| Phase 3: Core UI Components | 3-3.5 days | Phases 1, 2 | Not Started |\n| Phase 4: AI Integration & Feedback | 2-3 days | Phases 1, 2, 3 | Not Started |\n| Phase 5: Analytics & Polish | 2 days | Phases 2, 3, 4 | Not Started |\n\n**Total Estimated Time:** 10.5-13 days\n\n---\n\n## Phase 1: Foundation & DevOps\n**Goal:** Set up a stable, reproducible development environment that all other phases can build upon.\n\n### Tasks\n- [ ] **1.1 Next.js 15 Setup**\n  - Initialize Next.js 15 with TypeScript\n  - Configure App Router structure\n  - Set up ESLint and Prettier\n  - Time: 2-3 hours\n\n- [ ] **1.2 Tailwind & Shadcn Configuration**\n  - Install and configure Tailwind CSS\n  - Set up shadcn/ui component library\n  - Create base theme tokens (colors, spacing, typography)\n  - Set up CSS variables for theming\n  - Time: 2-3 hours\n\n- [ ] **1.3 Project Structure**\n  - Create folder structure (`/app`, `/components`, `/lib`, `/types`, `/stores`)\n  - Set up path aliases in tsconfig.json\n  - Create base layout component with navigation shell\n  - Time: 1-2 hours\n\n- [ ] **1.4 Replit Configuration**\n  - Configure dev server to run on `0.0.0.0:5000`\n  - Set up workflow configuration\n  - Configure Next.js to allow all hosts (proxy requirement)\n  - Create `.env.example` file\n  - Time: 1 hour\n\n- [ ] **1.5 State Management Setup**\n  - Install and configure Zustand\n  - Create base store structure (auth, user, plan, feedback)\n  - Set up store scaffolds with TypeScript types\n  - Time: 2 hours\n\n- [ ] **1.6 Mock Data Utilities**\n  - Create mock data generators for development\n  - Set up sample user profiles, tasks, feedback\n  - Time: 1-2 hours\n\n### Deliverables\n‚úÖ Working Next.js app on port 5000  \n‚úÖ CI lint/test scripts passing  \n‚úÖ Base layout with navigation shell  \n‚úÖ Documented run instructions in README  \n‚úÖ Theme tokens configured  \n‚úÖ Store scaffolds ready  \n\n### Acceptance Criteria\n- `npm run dev` starts server on `0.0.0.0:5000`\n- No TypeScript errors in project\n- Base layout renders with theme applied\n- All team members can clone and run locally\n\n### Handoff Notes\n**Provides to other phases:**\n- Shared TypeScript types in `/types/shared.ts`\n- Theme configuration in `tailwind.config.ts`\n- Base components in `/components/ui`\n- Store structure in `/stores`\n\n---\n\n## Phase 2: Authentication & Data Layer\n**Goal:** Implement secure authentication and data persistence layer.\n\n### Tasks\n- [ ] **2.1 Clerk Integration**\n  - Set up Clerk account and get API keys\n  - Install `@clerk/nextjs`\n  - Configure Clerk provider and middleware\n  - Implement Google OAuth\n  - Implement Guest mode\n  - Time: 3-4 hours\n\n- [ ] **2.2 Route Guards**\n  - Create protected route middleware\n  - Set up redirect logic (new users ‚Üí onboarding, returning ‚Üí dashboard)\n  - Implement session management\n  - Time: 2 hours\n\n- [ ] **2.3 Replit DB Integration**\n  - Create database client wrapper\n  - Set up typed repository pattern\n  - Implement CRUD utilities for:\n    - User profiles\n    - Daily plans\n    - Feedback records\n    - Activity patterns\n    - Productivity scores\n  - Time: 4-5 hours\n\n- [ ] **2.4 Database Schema Implementation**\n  - Implement schema as documented in spec:\n    - `user:{userId}:profile`\n    - `user:{userId}:plan:{date}`\n    - `user:{userId}:feedback:{taskId}`\n    - `user:{userId}:score:{date}`\n    - `user:{userId}:activity:{date}`\n  - Create migration/seed scripts\n  - Time: 3-4 hours\n\n- [ ] **2.5 API Route Scaffolds**\n  - Create API route structure\n  - Set up error handling middleware\n  - Implement stubs for:\n    - `/api/user/profile` (GET, PUT)\n    - `/api/user/onboarding` (POST)\n    - `/api/plan/generate` (POST)\n    - `/api/feedback` (POST)\n  - Time: 2-3 hours\n\n### Deliverables\n‚úÖ End-to-end sign-in/sign-out flow  \n‚úÖ Guest session support  \n‚úÖ Secured API routes  \n‚úÖ CRUD utilities with type safety  \n‚úÖ Seed data for testing  \n\n### Acceptance Criteria\n- Users can sign in with Google\n- Guest users get anonymous sessions\n- Protected routes redirect correctly\n- All database operations are typed\n- Seed script populates sample data\n\n### Handoff Notes\n**Depends on Phase 1:**\n- Base layout structure\n- TypeScript types\n- Store scaffolds\n\n**Provides to other phases:**\n- Auth context via Clerk\n- Database utilities in `/lib/db`\n- API route patterns\n- Type definitions in `/types/database.ts`\n\n---\n\n## Phase 3: Core UI Components\n**Goal:** Build the main user interface for task management and scheduling.\n\n### Tasks\n- [ ] **3.1 Onboarding Wizard**\n  - Create multi-step form component\n  - Implement 5 onboarding steps:\n    1. Occupation/industry\n    2. Daily routine (wake/sleep times)\n    3. Habits selection\n    4. Focus scale (1-10)\n    5. Peak activity hours\n  - Add form validation\n  - Connect to `/api/user/onboarding`\n  - Time: 4-5 hours\n\n- [ ] **3.2 Calendar Component (Left Panel)**\n  - Integrate React Big Calendar\n  - Configure as date picker only (no events)\n  - Add daily productivity badges with color coding:\n    - üü¢ 90-100% (Excellent)\n    - üü° 70-89% (Good)\n    - üü† 50-69% (Average)\n    - üî¥ <50% (Needs work)\n  - Time: 3-4 hours\n\n- [ ] **3.3 Timeline Component (Right Panel)**\n  - Create hourly grid (3 AM ‚Üí 3 AM next day)\n  - Implement task blocks with priority colors (1.0-5.0)\n  - Add color gradient system\n  - Implement editing rules:\n    - ‚úÖ Upcoming events: Full edit\n    - üîí Ended events: Read-only, greyed out\n  - Time: 6-7 hours\n\n- [ ] **3.4 Task Editing**\n  - Create task edit dialog\n  - Allow time, priority, title, duration changes\n  - Add delete confirmation\n  - Implement drag-and-drop (optional)\n  - Time: 3-4 hours\n\n- [ ] **3.5 Focus Mode Layout**\n  - Create main dashboard layout\n  - Implement 30/70 split (calendar/timeline)\n  - Add responsive breakpoints\n  - Style top navigation bar\n  - Time: 2-3 hours\n\n- [ ] **3.6 State Integration**\n  - Connect components to Zustand stores\n  - Implement optimistic updates\n  - Add loading states\n  - Handle error states\n  - Time: 3-4 hours\n\n### Deliverables\n‚úÖ Complete onboarding flow  \n‚úÖ Interactive calendar with badges  \n‚úÖ Timeline with editable tasks  \n‚úÖ Responsive layout  \n‚úÖ State persistence  \n\n### Acceptance Criteria\n- User can complete onboarding\n- Calendar shows productivity badges\n- Timeline displays tasks correctly\n- User can edit upcoming tasks\n- Past tasks are locked\n- All changes persist to database\n\n### Handoff Notes\n**Depends on:**\n- Phase 1: Layout, theme, components\n- Phase 2: Auth context, database utilities\n\n**Provides to other phases:**\n- Calendar component for reuse\n- Timeline component for AI updates\n- Task editing patterns\n\n---\n\n## Phase 4: AI Integration & Feedback Loop\n**Goal:** Implement AI-powered plan generation and feedback collection.\n\n### Tasks\n- [ ] **4.1 Google Gemini Setup**\n  - Get Gemini API key\n  - Install Gemini SDK\n  - Create AI client wrapper\n  - Set up rate limiting\n  - Time: 2 hours\n\n- [ ] **4.2 Plan Generation**\n  - Implement `/api/plan/generate` endpoint\n  - Create prompt templates for:\n    - User profile context\n    - Historical feedback\n    - Calendar events\n    - Tomorrow's plan generation\n  - Parse AI response into structured tasks\n  - Time: 4-5 hours\n\n- [ ] **4.3 AI Chat Interface**\n  - Create chat UI component\n  - Implement `/api/chat` with streaming\n  - Add command parser for:\n    - \"Generate tomorrow's plan\"\n    - \"Move task to [time]\"\n    - \"Add [task] at [time]\"\n    - \"Delete [task]\"\n  - Display streaming responses\n  - Time: 5-6 hours\n\n- [ ] **4.4 Feedback Toast System**\n  - Create FeedbackToast component\n  - Trigger 2 minutes before task ends\n  - Collect:\n    - Focus Rating (1-10 slider)\n    - Completion % (dropdown)\n    - Text feedback (optional)\n  - Store to database\n  - Time: 4-5 hours\n\n- [ ] **4.5 Pattern Analysis**\n  - Implement feedback aggregation\n  - Calculate daily productivity scores\n  - Identify hourly activity patterns\n  - Generate insights for AI\n  - Time: 3-4 hours\n\n### Deliverables\n‚úÖ Working plan generation  \n‚úÖ AI chat with streaming  \n‚úÖ Feedback collection system  \n‚úÖ Pattern analysis pipeline  \n\n### Acceptance Criteria\n- AI generates sensible tomorrow's plans\n- Chat commands work correctly\n- Feedback toast appears on schedule\n- All feedback is stored with timestamps\n- Productivity scores update daily\n\n### Handoff Notes\n**Depends on:**\n- Phase 1: Store structure\n- Phase 2: Database, API patterns\n- Phase 3: Timeline component\n\n**Provides to other phases:**\n- AI utilities in `/lib/ai`\n- Feedback data for analytics\n- Pattern analysis functions\n\n---\n\n## Phase 5: Analytics, Settings & Polish\n**Goal:** Add analytics dashboard, settings, and final polish for production.\n\n### Tasks\n- [ ] **5.1 Analytics Dashboard**\n  - Install and configure Recharts\n  - Implement charts:\n    - 30-Day Productivity Trend (Line)\n    - Weekly Heatmap (Calendar)\n    - Time-of-Day Activity (Area)\n    - Focus vs Completion (Scatter)\n    - Completion Rate Trends (Bar)\n    - Focus-Completion Matrix (Quadrant)\n  - Add chart tooltips and legends\n  - Time: 6-7 hours\n\n- [ ] **5.2 Profile & Settings Pages**\n  - Create profile edit page\n  - Implement settings sections:\n    - Account (name, email)\n    - Privacy (data export, clear history)\n    - Notifications (toggles, timing)\n    - Appearance (dark mode, time format, colors)\n  - Connect to database\n  - Time: 4-5 hours\n\n- [ ] **5.3 Accessibility**\n  - Add ARIA labels\n  - Implement keyboard navigation\n  - Test screen reader support\n  - Add color-blind friendly palettes\n  - Ensure contrast ratios\n  - Time: 3-4 hours\n\n- [ ] **5.4 Performance Optimization**\n  - Optimize bundle size\n  - Add loading skeletons\n  - Implement code splitting\n  - Optimize images\n  - Add caching headers\n  - Time: 2-3 hours\n\n- [ ] **5.5 Documentation & Deployment**\n  - Update README with setup instructions\n  - Document environment variables\n  - Configure deployment settings for Replit\n  - Test production build\n  - Time: 2 hours\n\n### Deliverables\n‚úÖ Complete analytics dashboard  \n‚úÖ Profile and settings management  \n‚úÖ Accessibility compliance  \n‚úÖ Production-ready build  \n‚úÖ Complete documentation  \n\n### Acceptance Criteria\n- All charts display correctly\n- Settings persist across sessions\n- Keyboard navigation works\n- Page load time < 3 seconds\n- Production deployment successful\n\n### Handoff Notes\n**Depends on:**\n- Phase 2: Database for settings\n- Phase 3: UI patterns\n- Phase 4: Feedback data\n\n**Final deliverable:**\n- Production-ready FlowMate MVP\n\n---\n\n## Cross-Phase Coordination\n\n### Shared Contracts\nAll phases must follow these shared contracts (defined in Phase 1):\n\n**TypeScript Types** (`/types/shared.ts`):\n```typescript\ninterface UserProfile {\n  userId: string;\n  occupation: string;\n  focusScale: number;\n  peakHours: string[];\n  habits: string[];\n  routine: string;\n  colorGradient: { low: string; high: string };\n}\n\ninterface Task {\n  id: string;\n  time: string;\n  duration: number;\n  title: string;\n  priority: number;\n  completed: boolean;\n}\n\ninterface Feedback {\n  taskId: string;\n  focusRating: number;\n  completionPercent: number;\n  textFeedback?: string;\n  timestamp: string;\n}\n```\n\n### API Contracts\nAll API routes must follow REST conventions:\n- Use proper HTTP methods (GET, POST, PUT, DELETE)\n- Return consistent error format: `{ error: string, code: number }`\n- Use proper status codes\n- Include TypeScript types for request/response\n\n### Feature Flags\nUse environment variables for toggling features:\n- `NEXT_PUBLIC_ENABLE_AI=true/false` - Enable/disable AI features\n- `NEXT_PUBLIC_MOCK_DATA=true/false` - Use mock data instead of API\n\n---\n\n## Conflict Prevention\n\n### File Ownership\nTo prevent merge conflicts, each phase has designated file ownership:\n\n**Phase 1 owns:**\n- `/app/layout.tsx`\n- `/components/ui/*`\n- `/lib/utils.ts`\n- `/types/shared.ts`\n- Configuration files\n\n**Phase 2 owns:**\n- `/app/api/auth/*`\n- `/lib/db/*`\n- `/types/database.ts`\n- `/middleware.ts`\n\n**Phase 3 owns:**\n- `/app/(dashboard)/*`\n- `/components/calendar/*`\n- `/components/timeline/*`\n- `/components/onboarding/*`\n\n**Phase 4 owns:**\n- `/app/api/plan/*`\n- `/app/api/chat/*`\n- `/app/api/feedback/*`\n- `/lib/ai/*`\n- `/components/chat/*`\n\n**Phase 5 owns:**\n- `/app/analytics/*`\n- `/app/settings/*`\n- `/components/charts/*`\n\n### Branch Strategy\n- Each phase gets its own branch: `phase-1`, `phase-2`, etc.\n- Merge to `main` only when phase is complete and tested\n- Create PR with checklist from acceptance criteria\n\n### Communication\n- Update `.phase-status.json` when starting/completing work\n- Leave TODO comments with your name for incomplete work\n- Document any deviations from spec in commit messages\n\n---\n\n## Testing Requirements\n\nEach phase must include:\n1. **Unit tests** for utility functions\n2. **Integration tests** for API routes\n3. **Component tests** for UI elements\n4. **Manual testing checklist** in PR description\n\n---\n\n## Questions?\n\nIf you're unsure about anything:\n1. Check `DEVELOPMENT.md` for workflow\n2. Check `replit.md` for architectural decisions\n3. Ask in team chat before making assumptions\n4. Document your decision if you must proceed\n\n---\n\n**Last Updated:** November 8, 2025  \n**Document Owner:** Project Lead\n","size_bytes":13787},"middleware.ts":{"content":"import { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server';\n\nconst isProtectedRoute = createRouteMatcher([\n  '/dashboard(.*)',\n  '/onboarding(.*)',\n  '/analytics(.*)',\n  '/settings(.*)',\n  '/api/user(.*)',\n  '/api/plan(.*)',\n  '/api/feedback(.*)',\n]);\n\nconst isPublicRoute = createRouteMatcher([\n  '/',\n  '/sign-in(.*)',\n  '/sign-up(.*)',\n]);\n\nexport default clerkMiddleware(async (auth, req) => {\n  if (!isPublicRoute(req)) {\n    await auth.protect();\n  }\n});\n\nexport const config = {\n  matcher: [\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    '/(api|trpc)(.*)',\n  ],\n};\n","size_bytes":669},"lib/db/README.md":{"content":"# Database Layer Documentation\n\n## Overview\nFlowMate uses Replit DB (key-value store) with a repository pattern for type-safe data access.\n\n## Architecture\n\n### Client (`lib/db/client.ts`)\n- Singleton pattern for database connection\n- Safe wrapper functions with consistent error handling:\n  - `safeGet<T>(key)` - Get a value by key\n  - `safeSet<T>(key, value)` - Set a value\n  - `safeDelete(key)` - Delete a key\n  - `safeList(prefix)` - List keys with prefix\n\n### Repositories (`lib/db/repository.ts`)\nType-safe repositories for each data entity:\n\n#### UserRepository\n- `getProfile(userId)` - Get user profile\n- `saveProfile(userId, profile)` - Save/update profile\n- `deleteProfile(userId)` - Delete profile\n\n#### PlanRepository\n- `getPlan(userId, date)` - Get daily plan\n- `savePlan(userId, date, plan)` - Save/update plan\n- `deletePlan(userId, date)` - Delete plan\n- `listUserPlans(userId)` - List all plan dates\n\n#### FeedbackRepository\n- `getFeedback(userId, taskId)` - Get task feedback\n- `saveFeedback(userId, taskId, feedback)` - Save feedback\n- `listUserFeedback(userId)` - List feedback keys\n- `getAllUserFeedback(userId)` - Get all feedback objects\n\n#### ProductivityRepository\n- `getScore(userId, date)` - Get productivity score\n- `saveScore(userId, date, score)` - Save score\n- `listUserScores(userId)` - List score dates\n\n#### ActivityRepository\n- `getActivity(userId, date)` - Get activity pattern\n- `saveActivity(userId, date, activity)` - Save activity\n- `listUserActivities(userId)` - List activity dates\n\n#### SettingsRepository\n- `getSettings(userId)` - Get user settings\n- `saveSettings(userId, settings)` - Save settings\n\n## Key Naming Convention\n\nAll keys follow the pattern: `user:{userId}:{type}:{identifier}`\n\nExamples:\n- `user:123:profile`\n- `user:123:plan:2025-11-08`\n- `user:123:feedback:task-456`\n- `user:123:score:2025-11-08`\n- `user:123:activity:2025-11-08`\n- `user:123:settings`\n\n## Error Handling\n\nAll repository methods return `DBResult<T>`:\n```typescript\n{\n  ok: boolean;\n  value?: T;        // Present when ok is true\n  error?: string;   // Present when ok is false\n}\n```\n\nError types:\n- `\"Key not found\"` - Requested key doesn't exist (404)\n- Other errors - Database operation failed (500)\n\n## Usage in API Routes\n\n```typescript\nimport { userRepo } from '@/lib/db/repository';\nimport { getUserId, unauthorized, notFound, serverError, success } from '@/lib/api-utils';\n\nexport async function GET() {\n  const userId = await getUserId();\n  if (!userId) return unauthorized();\n\n  const result = await userRepo.getProfile(userId);\n  \n  if (!result.ok) {\n    if (result.error === 'Key not found') {\n      return notFound('Profile not found');\n    }\n    return serverError('Database error');\n  }\n\n  return success(result.value);\n}\n```\n\n## Testing\n\nFor Phase 2 development, you can test the database layer using mock data:\n\n```typescript\nimport { userRepo } from '@/lib/db/repository';\nimport { mockUserProfile } from '@/lib/mock-data';\n\n// Save mock profile\nawait userRepo.saveProfile('test-user', mockUserProfile);\n\n// Retrieve it\nconst result = await userRepo.getProfile('test-user');\nconsole.log(result.value);\n```\n\n## Phase 3+ Integration\n\nWhen building UI components in Phase 3:\n1. Use these repositories in your API routes\n2. Never expose database operations to the client\n3. All database access must go through authenticated API routes\n4. Use Zustand stores on the client to cache API responses\n\n## Migration Notes\n\n- Replit DB is a simple key-value store\n- No schema migrations needed (schemaless)\n- Data is automatically persisted\n- Works only in Replit environment\n- For production at scale, consider PostgreSQL/MongoDB\n","size_bytes":3661},"app/api/plan/[date]/route.ts":{"content":"import { NextRequest } from 'next/server';\nimport { planRepo } from '@/lib/db/repository';\nimport { getUserId, unauthorized, notFound, serverError, success } from '@/lib/api-utils';\n\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: Promise<{ date: string }> }\n) {\n  try {\n    const userId = await getUserId();\n    \n    if (!userId) {\n      return unauthorized();\n    }\n\n    const { date } = await params;\n\n    const result = await planRepo.getPlan(userId, date);\n    \n    if (!result.ok) {\n      if (result.error === 'Key not found') {\n        return notFound('Plan not found for this date');\n      }\n      console.error('Database error:', result.error);\n      return serverError('Failed to fetch plan');\n    }\n\n    return success(result.value);\n  } catch (error) {\n    console.error('Error fetching plan:', error);\n    return serverError();\n  }\n}\n\nexport async function PUT(\n  request: NextRequest,\n  { params }: { params: Promise<{ date: string }> }\n) {\n  try {\n    const userId = await getUserId();\n    \n    if (!userId) {\n      return unauthorized();\n    }\n\n    const { date } = await params;\n    const body = await request.json();\n\n    const plan = {\n      ...body,\n      date,\n      lastModified: new Date().toISOString(),\n    };\n\n    const result = await planRepo.savePlan(userId, date, plan);\n    \n    if (!result.ok) {\n      return serverError('Failed to update plan');\n    }\n\n    return success(plan);\n  } catch (error) {\n    console.error('Error updating plan:', error);\n    return serverError();\n  }\n}\n","size_bytes":1540},"lib/utils.ts":{"content":"import { type ClassValue, clsx } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\nexport function formatTime(time: string, format: '12h' | '24h' = '12h'): string {\n  const [hours, minutes] = time.split(':').map(Number);\n  \n  if (format === '24h') {\n    return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;\n  }\n  \n  const period = hours >= 12 ? 'PM' : 'AM';\n  const displayHours = hours % 12 || 12;\n  return `${displayHours}:${minutes.toString().padStart(2, '0')} ${period}`;\n}\n\nexport function calculateDuration(startTime: string, endTime: string): number {\n  const [startHours, startMinutes] = startTime.split(':').map(Number);\n  const [endHours, endMinutes] = endTime.split(':').map(Number);\n  \n  const startTotal = startHours * 60 + startMinutes;\n  let endTotal = endHours * 60 + endMinutes;\n  \n  if (endTotal < startTotal) {\n    endTotal += 24 * 60;\n  }\n  \n  return endTotal - startTotal;\n}\n\nexport function getTimeFromDate(date: Date): string {\n  return date.toTimeString().slice(0, 5);\n}\n\nexport function formatDate(date: string): string {\n  return new Date(date).toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  });\n}\n","size_bytes":1288},"app/layout.tsx":{"content":"import type { Metadata } from \"next\";\nimport { ClerkProvider } from '@clerk/nextjs';\nimport \"./globals.css\";\n\nexport const metadata: Metadata = {\n  title: \"FlowMate - AI-Powered Productivity Assistant\",\n  description: \"Optimize your day with AI-generated schedules based on focus patterns and habits\",\n};\n\nexport default function RootLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode;\n}>) {\n  return (\n    <ClerkProvider>\n      <html lang=\"en\">\n        <body className=\"antialiased\">\n          {children}\n        </body>\n      </html>\n    </ClerkProvider>\n  );\n}\n","size_bytes":576},"lib/db/repository.ts":{"content":"import { UserProfile, DailyPlan, Feedback, ProductivityScore, ActivityPattern, UserSettings } from '@/types/shared';\nimport { safeGet, safeSet, safeDelete, safeList, DBResult } from './client';\n\nexport class UserRepository {\n  private getProfileKey(userId: string): string {\n    return `user:${userId}:profile`;\n  }\n\n  async getProfile(userId: string): Promise<DBResult<UserProfile>> {\n    return safeGet<UserProfile>(this.getProfileKey(userId));\n  }\n\n  async saveProfile(userId: string, profile: UserProfile): Promise<DBResult<null>> {\n    return safeSet(this.getProfileKey(userId), profile);\n  }\n\n  async deleteProfile(userId: string): Promise<DBResult<null>> {\n    return safeDelete(this.getProfileKey(userId));\n  }\n}\n\nexport class PlanRepository {\n  private getPlanKey(userId: string, date: string): string {\n    return `user:${userId}:plan:${date}`;\n  }\n\n  async getPlan(userId: string, date: string): Promise<DBResult<DailyPlan>> {\n    return safeGet<DailyPlan>(this.getPlanKey(userId, date));\n  }\n\n  async savePlan(userId: string, date: string, plan: DailyPlan): Promise<DBResult<null>> {\n    return safeSet(this.getPlanKey(userId, date), plan);\n  }\n\n  async deletePlan(userId: string, date: string): Promise<DBResult<null>> {\n    return safeDelete(this.getPlanKey(userId, date));\n  }\n\n  async listUserPlans(userId: string): Promise<DBResult<string[]>> {\n    return safeList(`user:${userId}:plan:`);\n  }\n}\n\nexport class FeedbackRepository {\n  private getFeedbackKey(userId: string, taskId: string): string {\n    return `user:${userId}:feedback:${taskId}`;\n  }\n\n  async getFeedback(userId: string, taskId: string): Promise<DBResult<Feedback>> {\n    return safeGet<Feedback>(this.getFeedbackKey(userId, taskId));\n  }\n\n  async saveFeedback(userId: string, taskId: string, feedback: Feedback): Promise<DBResult<null>> {\n    return safeSet(this.getFeedbackKey(userId, taskId), feedback);\n  }\n\n  async listUserFeedback(userId: string): Promise<DBResult<string[]>> {\n    return safeList(`user:${userId}:feedback:`);\n  }\n\n  async getAllUserFeedback(userId: string): Promise<DBResult<Feedback[]>> {\n    const keysResult = await this.listUserFeedback(userId);\n    \n    if (!keysResult.ok || !keysResult.value) {\n      return { ok: false, error: keysResult.error };\n    }\n\n    const feedbackList: Feedback[] = [];\n    \n    for (const key of keysResult.value) {\n      const taskId = key.split(':').pop();\n      if (taskId) {\n        const result = await this.getFeedback(userId, taskId);\n        if (result.ok && result.value) {\n          feedbackList.push(result.value);\n        }\n      }\n    }\n\n    return { ok: true, value: feedbackList };\n  }\n}\n\nexport class ProductivityRepository {\n  private getScoreKey(userId: string, date: string): string {\n    return `user:${userId}:score:${date}`;\n  }\n\n  async getScore(userId: string, date: string): Promise<DBResult<ProductivityScore>> {\n    return safeGet<ProductivityScore>(this.getScoreKey(userId, date));\n  }\n\n  async saveScore(userId: string, date: string, score: ProductivityScore): Promise<DBResult<null>> {\n    return safeSet(this.getScoreKey(userId, date), score);\n  }\n\n  async listUserScores(userId: string): Promise<DBResult<string[]>> {\n    return safeList(`user:${userId}:score:`);\n  }\n}\n\nexport class ActivityRepository {\n  private getActivityKey(userId: string, date: string): string {\n    return `user:${userId}:activity:${date}`;\n  }\n\n  async getActivity(userId: string, date: string): Promise<DBResult<ActivityPattern>> {\n    return safeGet<ActivityPattern>(this.getActivityKey(userId, date));\n  }\n\n  async saveActivity(userId: string, date: string, activity: ActivityPattern): Promise<DBResult<null>> {\n    return safeSet(this.getActivityKey(userId, date), activity);\n  }\n\n  async listUserActivities(userId: string): Promise<DBResult<string[]>> {\n    return safeList(`user:${userId}:activity:`);\n  }\n}\n\nexport class SettingsRepository {\n  private getSettingsKey(userId: string): string {\n    return `user:${userId}:settings`;\n  }\n\n  async getSettings(userId: string): Promise<DBResult<UserSettings>> {\n    return safeGet<UserSettings>(this.getSettingsKey(userId));\n  }\n\n  async saveSettings(userId: string, settings: UserSettings): Promise<DBResult<null>> {\n    return safeSet(this.getSettingsKey(userId), settings);\n  }\n}\n\nexport const userRepo = new UserRepository();\nexport const planRepo = new PlanRepository();\nexport const feedbackRepo = new FeedbackRepository();\nexport const productivityRepo = new ProductivityRepository();\nexport const activityRepo = new ActivityRepository();\nexport const settingsRepo = new SettingsRepository();\n","size_bytes":4601},"components/onboarding/StepHabits.tsx":{"content":"'use client';\n\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { cn } from '@/lib/utils';\n\ninterface StepHabitsProps {\n  selected: string[];\n  onChange: (habits: string[]) => void;\n}\n\nconst HABIT_OPTIONS = [\n  { id: 'exercise', label: 'Morning Exercise', icon: 'üí™' },\n  { id: 'meditation', label: 'Meditation', icon: 'üßò' },\n  { id: 'reading', label: 'Reading', icon: 'üìö' },\n  { id: 'journaling', label: 'Journaling', icon: '‚úçÔ∏è' },\n  { id: 'breakfast', label: 'Healthy Breakfast', icon: 'ü•ó' },\n  { id: 'learning', label: 'Learning/Courses', icon: 'üéì' },\n  { id: 'social', label: 'Social Time', icon: 'üë•' },\n  { id: 'creative', label: 'Creative Work', icon: 'üé®' },\n];\n\nexport function StepHabits({ selected, onChange }: StepHabitsProps) {\n  const toggleHabit = (habitId: string) => {\n    if (selected.includes(habitId)) {\n      onChange(selected.filter((h) => h !== habitId));\n    } else {\n      onChange([...selected, habitId]);\n    }\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Select Your Habits</CardTitle>\n        <CardDescription>\n          Choose activities you'd like to incorporate into your daily routine\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className=\"grid grid-cols-2 gap-3\">\n          {HABIT_OPTIONS.map((habit) => (\n            <Button\n              key={habit.id}\n              variant=\"outline\"\n              onClick={() => toggleHabit(habit.id)}\n              className={cn(\n                'h-20 flex flex-col items-center justify-center gap-2',\n                selected.includes(habit.id) && 'border-primary bg-primary/10'\n              )}\n            >\n              <span className=\"text-2xl\">{habit.icon}</span>\n              <span className=\"text-sm\">{habit.label}</span>\n            </Button>\n          ))}\n        </div>\n        <p className=\"text-sm text-muted-foreground mt-4\">\n          Selected: {selected.length} {selected.length === 1 ? 'habit' : 'habits'}\n        </p>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":2135},"components/onboarding/StepOccupation.tsx":{"content":"'use client';\n\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\n\ninterface StepOccupationProps {\n  value: string;\n  onChange: (value: string) => void;\n}\n\nexport function StepOccupation({ value, onChange }: StepOccupationProps) {\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>What's your occupation?</CardTitle>\n        <CardDescription>\n          Tell us what you do so we can tailor your daily plan\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"occupation\">Occupation / Industry</Label>\n            <Input\n              id=\"occupation\"\n              placeholder=\"e.g., Software Engineer, Student, Entrepreneur\"\n              value={value}\n              onChange={(e) => onChange(e.target.value)}\n              className=\"mt-2\"\n            />\n          </div>\n          <p className=\"text-sm text-muted-foreground\">\n            This helps us understand your work style and generate relevant tasks\n          </p>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":1225},"components/onboarding/OnboardingWizard.tsx":{"content":"'use client';\n\nimport { useState } from 'react';\nimport { OnboardingData } from '@/types/shared';\nimport { StepOccupation } from './StepOccupation';\nimport { StepRoutine } from './StepRoutine';\nimport { StepHabits } from './StepHabits';\nimport { StepFocus } from './StepFocus';\nimport { StepPeakHours } from './StepPeakHours';\nimport { Progress } from '@/components/ui/progress';\nimport { Button } from '@/components/ui/button';\n\ninterface OnboardingWizardProps {\n  onComplete: (data: OnboardingData) => void;\n}\n\nexport function OnboardingWizard({ onComplete }: OnboardingWizardProps) {\n  const [currentStep, setCurrentStep] = useState(1);\n  const [formData, setFormData] = useState<Partial<OnboardingData>>({\n    habits: [],\n    peakHours: [],\n    focusScale: 5\n  });\n\n  const totalSteps = 5;\n  const progress = (currentStep / totalSteps) * 100;\n\n  const updateFormData = (data: Partial<OnboardingData>) => {\n    setFormData((prev) => ({ ...prev, ...data }));\n  };\n\n  const handleNext = () => {\n    if (currentStep < totalSteps) {\n      setCurrentStep((prev) => prev + 1);\n    } else {\n      onComplete(formData as OnboardingData);\n    }\n  };\n\n  const handleBack = () => {\n    if (currentStep > 1) {\n      setCurrentStep((prev) => prev - 1);\n    }\n  };\n\n  const canProceed = () => {\n    switch (currentStep) {\n      case 1:\n        return !!formData.occupation && formData.occupation.length > 0;\n      case 2:\n        return !!formData.wakeTime && !!formData.sleepTime;\n      case 3:\n        return formData.habits && formData.habits.length > 0;\n      case 4:\n        return typeof formData.focusScale === 'number';\n      case 5:\n        return formData.peakHours && formData.peakHours.length > 0;\n      default:\n        return false;\n    }\n  };\n\n  return (\n    <div className=\"max-w-2xl mx-auto p-6\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold mb-2\">Welcome to FlowMate</h1>\n        <p className=\"text-muted-foreground\">\n          Let's personalize your productivity experience (Step {currentStep} of {totalSteps})\n        </p>\n        <Progress value={progress} className=\"mt-4\" />\n      </div>\n\n      <div className=\"min-h-[400px]\">\n        {currentStep === 1 && (\n          <StepOccupation\n            value={formData.occupation || ''}\n            onChange={(occupation) => updateFormData({ occupation })}\n          />\n        )}\n        {currentStep === 2 && (\n          <StepRoutine\n            wakeTime={formData.wakeTime || ''}\n            sleepTime={formData.sleepTime || ''}\n            onChange={(wakeTime, sleepTime) => updateFormData({ wakeTime, sleepTime })}\n          />\n        )}\n        {currentStep === 3 && (\n          <StepHabits\n            selected={formData.habits || []}\n            onChange={(habits) => updateFormData({ habits })}\n          />\n        )}\n        {currentStep === 4 && (\n          <StepFocus\n            value={formData.focusScale}\n            onChange={(focusScale) => updateFormData({ focusScale })}\n          />\n        )}\n        {currentStep === 5 && (\n          <StepPeakHours\n            selected={formData.peakHours || []}\n            onChange={(peakHours) => updateFormData({ peakHours })}\n          />\n        )}\n      </div>\n\n      <div className=\"flex justify-between mt-8\">\n        <Button\n          onClick={handleBack}\n          disabled={currentStep === 1}\n          variant=\"outline\"\n        >\n          Back\n        </Button>\n        <Button\n          onClick={handleNext}\n          disabled={!canProceed()}\n        >\n          {currentStep === totalSteps ? 'Complete' : 'Next'}\n        </Button>\n      </div>\n    </div>\n  );\n}\n","size_bytes":3618},"components/onboarding/StepPeakHours.tsx":{"content":"'use client';\n\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { cn } from '@/lib/utils';\n\ninterface StepPeakHoursProps {\n  selected: string[];\n  onChange: (hours: string[]) => void;\n}\n\nconst TIME_PERIODS = [\n  { id: 'early-morning', label: 'Early Morning', time: '5-8 AM', icon: 'üåÖ' },\n  { id: 'morning', label: 'Morning', time: '8-11 AM', icon: '‚òÄÔ∏è' },\n  { id: 'midday', label: 'Midday', time: '11 AM-2 PM', icon: 'üå§Ô∏è' },\n  { id: 'afternoon', label: 'Afternoon', time: '2-5 PM', icon: 'üåÜ' },\n  { id: 'evening', label: 'Evening', time: '5-8 PM', icon: 'üåá' },\n  { id: 'night', label: 'Night', time: '8-11 PM', icon: 'üåô' },\n  { id: 'late-night', label: 'Late Night', time: '11 PM-2 AM', icon: 'üåÉ' },\n];\n\nexport function StepPeakHours({ selected, onChange }: StepPeakHoursProps) {\n  const togglePeriod = (periodId: string) => {\n    if (selected.includes(periodId)) {\n      onChange(selected.filter((h) => h !== periodId));\n    } else {\n      onChange([...selected, periodId]);\n    }\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Peak Productivity Hours</CardTitle>\n        <CardDescription>\n          When are you most productive and energized?\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className=\"grid grid-cols-1 gap-3\">\n          {TIME_PERIODS.map((period) => (\n            <Button\n              key={period.id}\n              variant=\"outline\"\n              onClick={() => togglePeriod(period.id)}\n              className={cn(\n                'h-16 flex items-center justify-between px-6',\n                selected.includes(period.id) && 'border-primary bg-primary/10'\n              )}\n            >\n              <div className=\"flex items-center gap-3\">\n                <span className=\"text-2xl\">{period.icon}</span>\n                <div className=\"text-left\">\n                  <div className=\"font-medium\">{period.label}</div>\n                  <div className=\"text-xs text-muted-foreground\">{period.time}</div>\n                </div>\n              </div>\n            </Button>\n          ))}\n        </div>\n        <p className=\"text-sm text-muted-foreground mt-4\">\n          Selected: {selected.length} {selected.length === 1 ? 'period' : 'periods'}\n        </p>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":2398},"components/onboarding/StepFocus.tsx":{"content":"'use client';\n\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Slider } from '@/components/ui/slider';\nimport { Label } from '@/components/ui/label';\n\ninterface StepFocusProps {\n  value?: number;\n  onChange: (value: number) => void;\n}\n\nconst FOCUS_LABELS: Record<number, string> = {\n  1: 'Easily distracted',\n  2: 'Often distracted',\n  3: 'Sometimes distracted',\n  4: 'Usually focused',\n  5: 'Moderately focused',\n  6: 'Pretty focused',\n  7: 'Very focused',\n  8: 'Highly focused',\n  9: 'Extremely focused',\n  10: 'Laser-focused',\n};\n\nexport function StepFocus({ value = 5, onChange }: StepFocusProps) {\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Focus Level</CardTitle>\n        <CardDescription>\n          How would you rate your typical focus when working on tasks?\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-6\">\n          <div>\n            <Label>Focus Scale (1-10)</Label>\n            <div className=\"mt-4\">\n              <Slider\n                value={[value]}\n                onValueChange={(values: number[]) => onChange(values[0])}\n                min={1}\n                max={10}\n                step={1}\n                className=\"mb-4\"\n              />\n            </div>\n          </div>\n          <div className=\"text-center\">\n            <div className=\"text-4xl font-bold text-primary mb-2\">{value}/10</div>\n            <p className=\"text-sm text-muted-foreground\">\n              {FOCUS_LABELS[value] || 'Focused'}\n            </p>\n          </div>\n          <p className=\"text-sm text-muted-foreground\">\n            This helps us understand how long you can typically maintain concentration\n          </p>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":1808},"components/onboarding/StepRoutine.tsx":{"content":"'use client';\n\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\n\ninterface StepRoutineProps {\n  wakeTime: string;\n  sleepTime: string;\n  onChange: (wakeTime: string, sleepTime: string) => void;\n}\n\nexport function StepRoutine({ wakeTime, sleepTime, onChange }: StepRoutineProps) {\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Daily Routine</CardTitle>\n        <CardDescription>\n          When do you typically start and end your day?\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-6\">\n          <div>\n            <Label htmlFor=\"wake-time\">Wake Up Time</Label>\n            <Input\n              id=\"wake-time\"\n              type=\"time\"\n              value={wakeTime}\n              onChange={(e) => onChange(e.target.value, sleepTime)}\n              className=\"mt-2\"\n            />\n          </div>\n          <div>\n            <Label htmlFor=\"sleep-time\">Sleep Time</Label>\n            <Input\n              id=\"sleep-time\"\n              type=\"time\"\n              value={sleepTime}\n              onChange={(e) => onChange(wakeTime, e.target.value)}\n              className=\"mt-2\"\n            />\n          </div>\n          <p className=\"text-sm text-muted-foreground\">\n            We'll schedule tasks within your active hours\n          </p>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":1502},"lib/ai/client.ts":{"content":"import { GoogleGenerativeAI } from '@google/generative-ai';\n\nclass GeminiClient {\n  private static instance: GoogleGenerativeAI | null = null;\n  private static rateLimiter: {\n    requests: number[];\n    maxRequests: number;\n    windowMs: number;\n  } = {\n    requests: [],\n    maxRequests: 15,\n    windowMs: 60000,\n  };\n\n  private constructor() {}\n\n  static getInstance(): GoogleGenerativeAI {\n    if (!GeminiClient.instance) {\n      const apiKey = process.env.GOOGLE_GEMINI_API_KEY;\n      if (!apiKey) {\n        throw new Error('GOOGLE_GEMINI_API_KEY is not configured');\n      }\n      GeminiClient.instance = new GoogleGenerativeAI(apiKey);\n    }\n    return GeminiClient.instance;\n  }\n\n  static async checkRateLimit(): Promise<boolean> {\n    const now = Date.now();\n    this.rateLimiter.requests = this.rateLimiter.requests.filter(\n      (timestamp) => now - timestamp < this.rateLimiter.windowMs\n    );\n\n    if (this.rateLimiter.requests.length >= this.rateLimiter.maxRequests) {\n      return false;\n    }\n\n    this.rateLimiter.requests.push(now);\n    return true;\n  }\n\n  static resetRateLimit(): void {\n    this.rateLimiter.requests = [];\n  }\n}\n\nexport const getGenAI = () => GeminiClient.getInstance();\nexport const checkRateLimit = () => GeminiClient.checkRateLimit();\nexport const resetRateLimit = () => GeminiClient.resetRateLimit();\n","size_bytes":1341},"components/timeline/TaskEditDialog.tsx":{"content":"'use client';\n\nimport { useState } from 'react';\nimport { Task, PriorityLevel } from '@/types/shared';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Slider } from '@/components/ui/slider';\n\ninterface TaskEditDialogProps {\n  task: Task | null;\n  open: boolean;\n  onClose: () => void;\n  onSave: (taskId: string, updates: Partial<Task>) => void;\n  onDelete: (taskId: string) => void;\n}\n\nexport function TaskEditDialog({\n  task,\n  open,\n  onClose,\n  onSave,\n  onDelete,\n}: TaskEditDialogProps) {\n  const [formData, setFormData] = useState<Partial<Task>>({});\n\n  const handleOpen = (isOpen: boolean) => {\n    if (isOpen && task) {\n      setFormData({\n        title: task.title,\n        time: task.time,\n        duration: task.duration,\n        priority: task.priority,\n      });\n    } else {\n      onClose();\n    }\n  };\n\n  const handleSave = () => {\n    if (task && formData) {\n      onSave(task.id, formData);\n      onClose();\n    }\n  };\n\n  const handleDelete = () => {\n    if (task && confirm('Are you sure you want to delete this task?')) {\n      onDelete(task.id);\n      onClose();\n    }\n  };\n\n  if (!task) return null;\n\n  const priorityValue = formData.priority ?? task.priority;\n\n  return (\n    <Dialog open={open} onOpenChange={handleOpen}>\n      <DialogContent className=\"sm:max-w-[500px]\">\n        <DialogHeader>\n          <DialogTitle>Edit Task</DialogTitle>\n          <DialogDescription>\n            Make changes to your task. Click save when you're done.\n          </DialogDescription>\n        </DialogHeader>\n        \n        <div className=\"grid gap-4 py-4\">\n          <div className=\"grid gap-2\">\n            <Label htmlFor=\"title\">Task Title</Label>\n            <Input\n              id=\"title\"\n              value={formData.title ?? task.title}\n              onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n              placeholder=\"Enter task title\"\n            />\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"grid gap-2\">\n              <Label htmlFor=\"time\">Start Time</Label>\n              <Input\n                id=\"time\"\n                type=\"time\"\n                value={formData.time ?? task.time}\n                onChange={(e) => setFormData({ ...formData, time: e.target.value })}\n              />\n            </div>\n\n            <div className=\"grid gap-2\">\n              <Label htmlFor=\"duration\">Duration (minutes)</Label>\n              <Input\n                id=\"duration\"\n                type=\"number\"\n                min=\"15\"\n                step=\"15\"\n                value={formData.duration ?? task.duration}\n                onChange={(e) => setFormData({ ...formData, duration: parseInt(e.target.value) })}\n              />\n            </div>\n          </div>\n\n          <div className=\"grid gap-2\">\n            <Label htmlFor=\"priority\">\n              Priority: {priorityValue.toFixed(1)} / 5.0\n            </Label>\n            <Slider\n              id=\"priority\"\n              min={1}\n              max={5}\n              step={0.5}\n              value={[priorityValue]}\n              onValueChange={(values: number[]) =>\n                setFormData({ ...formData, priority: values[0] as PriorityLevel })\n              }\n              className=\"mt-2\"\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              Higher priority tasks are highlighted more prominently\n            </p>\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button\n            variant=\"destructive\"\n            onClick={handleDelete}\n            className=\"mr-auto\"\n          >\n            Delete\n          </Button>\n          <Button variant=\"outline\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button onClick={handleSave}>Save changes</Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":4108},"components/ui/dialog.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\";\nimport { X } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Dialog = DialogPrimitive.Root;\n\nconst DialogTrigger = DialogPrimitive.Trigger;\n\nconst DialogPortal = DialogPrimitive.Portal;\n\nconst DialogClose = DialogPrimitive.Close;\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n));\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName;\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n));\nDialogContent.displayName = DialogPrimitive.Content.displayName;\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n);\nDialogHeader.displayName = \"DialogHeader\";\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n);\nDialogFooter.displayName = \"DialogFooter\";\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n));\nDialogTitle.displayName = DialogPrimitive.Title.displayName;\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nDialogDescription.displayName = DialogPrimitive.Description.displayName;\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n};\n","size_bytes":3871},"components/ui/select.tsx":{"content":"import * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5615},"components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport interface TextareaProps\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":772},"components/timeline/TaskBlock.tsx":{"content":"'use client';\n\nimport { Task } from '@/types/shared';\nimport { cn } from '@/lib/utils';\nimport { CheckCircle2, Circle } from 'lucide-react';\n\ninterface TaskBlockProps {\n  task: Task;\n  position: { top: string; height: string };\n  color: string;\n  isEditable: boolean;\n  onClick: () => void;\n}\n\nexport function TaskBlock({\n  task,\n  position,\n  color,\n  isEditable,\n  onClick,\n}: TaskBlockProps) {\n  return (\n    <div\n      className={cn(\n        'absolute left-0 right-0 mx-2 rounded-md p-2 cursor-pointer transition-all hover:shadow-md border',\n        !isEditable && 'opacity-50 cursor-not-allowed'\n      )}\n      style={{\n        top: position.top,\n        height: position.height,\n        backgroundColor: color + '30',\n        borderColor: color,\n        borderLeftWidth: '4px',\n      }}\n      onClick={isEditable ? onClick : undefined}\n    >\n      <div className=\"flex items-start gap-2 h-full\">\n        <div className=\"flex-shrink-0 mt-0.5\">\n          {task.completed ? (\n            <CheckCircle2 className=\"w-4 h-4 text-green-600\" />\n          ) : (\n            <Circle className=\"w-4 h-4 text-muted-foreground\" />\n          )}\n        </div>\n        <div className=\"flex-1 min-w-0\">\n          <div className={cn(\n            'text-sm font-medium truncate',\n            task.completed && 'line-through text-muted-foreground'\n          )}>\n            {task.title}\n          </div>\n          <div className=\"text-xs text-muted-foreground mt-0.5\">\n            {task.time} ‚Ä¢ {task.duration}min ‚Ä¢ Priority: {task.priority.toFixed(1)}\n          </div>\n        </div>\n      </div>\n      {!isEditable && (\n        <div className=\"absolute inset-0 bg-gray-500/10 rounded-md flex items-center justify-center\">\n          <span className=\"text-xs font-medium text-muted-foreground\">Past Event</span>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":1844},"lib/ai/generation.ts":{"content":"import { getGenAI, checkRateLimit } from './client';\nimport { buildPlanGenerationPrompt, parseTasksFromAIResponse } from './prompts';\nimport { UserProfile, Feedback, ActivityPattern, Task, APIResponse } from '@/types/shared';\n\nexport async function generateDailyPlan(\n  profile: UserProfile,\n  historicalFeedback: Feedback[],\n  activityPatterns: ActivityPattern[],\n  targetDate: string\n): Promise<APIResponse<Task[]>> {\n  try {\n    const canProceed = await checkRateLimit();\n    if (!canProceed) {\n      return {\n        error: 'Rate limit exceeded. Please try again in a minute.',\n        code: 'RATE_LIMIT_EXCEEDED',\n      };\n    }\n\n    const prompt = buildPlanGenerationPrompt(\n      profile,\n      historicalFeedback,\n      activityPatterns,\n      targetDate\n    );\n\n    const genAI = getGenAI();\n    const model = genAI.getGenerativeModel({ model: 'gemini-1.5-flash' });\n    const result = await model.generateContent(prompt);\n    const response = result.response;\n    const text = response.text();\n\n    const tasks = parseTasksFromAIResponse(text);\n\n    return {\n      data: tasks,\n    };\n  } catch (error) {\n    console.error('Error generating daily plan:', error);\n    return {\n      error: error instanceof Error ? error.message : 'Failed to generate plan',\n      code: 'GENERATION_ERROR',\n    };\n  }\n}\n\nexport async function streamChatResponse(\n  userMessage: string,\n  profile: UserProfile,\n  currentPlan: Task[],\n  onChunk: (text: string) => void\n): Promise<APIResponse<string>> {\n  try {\n    const canProceed = await checkRateLimit();\n    if (!canProceed) {\n      return {\n        error: 'Rate limit exceeded. Please try again in a minute.',\n        code: 'RATE_LIMIT_EXCEEDED',\n      };\n    }\n\n    const { buildChatPrompt } = await import('./prompts');\n    const prompt = buildChatPrompt(userMessage, profile, currentPlan);\n\n    const genAI = getGenAI();\n    const model = genAI.getGenerativeModel({ model: 'gemini-1.5-flash' });\n    const result = await model.generateContentStream(prompt);\n\n    let fullText = '';\n    for await (const chunk of result.stream) {\n      const chunkText = chunk.text();\n      fullText += chunkText;\n      onChunk(chunkText);\n    }\n\n    return {\n      data: fullText,\n    };\n  } catch (error) {\n    console.error('Error streaming chat response:', error);\n    return {\n      error: error instanceof Error ? error.message : 'Failed to generate response',\n      code: 'CHAT_ERROR',\n    };\n  }\n}\n","size_bytes":2436},"components/feedback/FeedbackToast.tsx":{"content":"'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Slider } from '@/components/ui/slider';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Textarea } from '@/components/ui/textarea';\nimport { X, Send } from 'lucide-react';\nimport { Task, Feedback } from '@/types/shared';\nimport { cn } from '@/lib/utils';\n\ninterface FeedbackToastProps {\n  task: Task;\n  onSubmit: (feedback: Omit<Feedback, 'timestamp' | 'taskDate'>) => void;\n  onDismiss: () => void;\n}\n\nexport function FeedbackToast({ task, onSubmit, onDismiss }: FeedbackToastProps) {\n  const [focusRating, setFocusRating] = useState<number>(5);\n  const [completionPercent, setCompletionPercent] = useState<number>(100);\n  const [textFeedback, setTextFeedback] = useState<string>('');\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    setTimeout(() => setIsVisible(true), 100);\n  }, []);\n\n  const handleSubmit = () => {\n    onSubmit({\n      taskId: task.id,\n      focusRating,\n      completionPercent,\n      textFeedback: textFeedback.trim() || undefined,\n    });\n  };\n\n  const handleDismiss = () => {\n    setIsVisible(false);\n    setTimeout(onDismiss, 300);\n  };\n\n  return (\n    <div\n      className={cn(\n        \"fixed bottom-4 right-4 w-96 bg-background border rounded-lg shadow-2xl p-6 transition-all duration-300 z-50\",\n        isVisible ? \"translate-y-0 opacity-100\" : \"translate-y-4 opacity-0\"\n      )}\n    >\n      <div className=\"flex items-start justify-between mb-4\">\n        <div className=\"flex-1\">\n          <h3 className=\"font-semibold text-lg\">How did it go?</h3>\n          <p className=\"text-sm text-muted-foreground mt-1\">{task.title}</p>\n          <p className=\"text-xs text-muted-foreground\">\n            {task.time} ‚Ä¢ {task.duration} minutes\n          </p>\n        </div>\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className=\"h-8 w-8\"\n          onClick={handleDismiss}\n        >\n          <X className=\"h-4 w-4\" />\n        </Button>\n      </div>\n\n      <div className=\"space-y-6\">\n        <div>\n          <div className=\"flex items-center justify-between mb-2\">\n            <label className=\"text-sm font-medium\">Focus Level</label>\n            <span className=\"text-sm font-semibold text-primary\">{focusRating}/10</span>\n          </div>\n          <Slider\n            value={[focusRating]}\n            onValueChange={(value) => setFocusRating(value[0])}\n            min={1}\n            max={10}\n            step={1}\n            className=\"w-full\"\n          />\n          <div className=\"flex justify-between text-xs text-muted-foreground mt-1\">\n            <span>Low</span>\n            <span>High</span>\n          </div>\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium mb-2 block\">Completion Rate</label>\n          <Select\n            value={completionPercent.toString()}\n            onValueChange={(value: string) => setCompletionPercent(parseInt(value))}\n          >\n            <SelectTrigger>\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"0\">0% - Didn't start</SelectItem>\n              <SelectItem value=\"25\">25% - Started</SelectItem>\n              <SelectItem value=\"50\">50% - Half done</SelectItem>\n              <SelectItem value=\"75\">75% - Almost done</SelectItem>\n              <SelectItem value=\"100\">100% - Completed</SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n\n        <div>\n          <label className=\"text-sm font-medium mb-2 block\">\n            Additional Notes <span className=\"text-muted-foreground\">(optional)</span>\n          </label>\n          <Textarea\n            value={textFeedback}\n            onChange={(e) => setTextFeedback(e.target.value)}\n            placeholder=\"Any blockers, insights, or notes...\"\n            className=\"min-h-[80px] resize-none\"\n          />\n        </div>\n\n        <div className=\"flex gap-2\">\n          <Button\n            variant=\"outline\"\n            className=\"flex-1\"\n            onClick={handleDismiss}\n          >\n            Skip\n          </Button>\n          <Button\n            className=\"flex-1\"\n            onClick={handleSubmit}\n          >\n            <Send className=\"w-4 h-4 mr-2\" />\n            Submit\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":4441},"components/ui/progress.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n));\nProgress.displayName = ProgressPrimitive.Root.displayName;\n\nexport { Progress };\n","size_bytes":798},"app/api/chat/route.ts":{"content":"import { NextRequest } from 'next/server';\nimport { getUserId, unauthorized, badRequest, serverError } from '@/lib/api-utils';\nimport { userRepo, planRepo } from '@/lib/db/repository';\nimport { streamChatResponse } from '@/lib/ai';\nimport { parseTasksFromAIResponse } from '@/lib/ai/prompts';\nimport { Task } from '@/types/shared';\n\nconst USE_MOCK_AI = process.env.NEXT_PUBLIC_MOCK_AI === 'true';\n\nexport async function POST(request: NextRequest) {\n  try {\n    const userId = await getUserId();\n    \n    if (!userId) {\n      return unauthorized();\n    }\n\n    const body = await request.json();\n    const { message, currentDate } = body;\n    \n    if (!message) {\n      return badRequest('Message is required');\n    }\n\n    const profileResult = await userRepo.getProfile(userId);\n    \n    if (!profileResult.ok || !profileResult.value) {\n      return badRequest('User profile not found. Complete onboarding first.');\n    }\n\n    let currentPlanTasks: Task[] = [];\n    if (currentDate) {\n      const planResult = await planRepo.getPlan(userId, currentDate);\n      if (planResult.ok && planResult.value) {\n        currentPlanTasks = planResult.value.tasks;\n      }\n    }\n\n    if (USE_MOCK_AI) {\n      const mockResponse = getMockChatResponse(message);\n      return new Response(mockResponse, {\n        headers: {\n          'Content-Type': 'text/plain',\n        },\n      });\n    }\n\n    const encoder = new TextEncoder();\n    const stream = new ReadableStream({\n      async start(controller) {\n        try {\n          await streamChatResponse(\n            message,\n            profileResult.value!,\n            currentPlanTasks,\n            (chunk) => {\n              controller.enqueue(encoder.encode(chunk));\n            }\n          );\n          controller.close();\n        } catch (error) {\n          console.error('Streaming error:', error);\n          controller.error(error);\n        }\n      },\n    });\n\n    return new Response(stream, {\n      headers: {\n        'Content-Type': 'text/plain',\n        'Transfer-Encoding': 'chunked',\n      },\n    });\n  } catch (error) {\n    console.error('Error in chat:', error);\n    return serverError();\n  }\n}\n\nfunction getMockChatResponse(message: string): string {\n  const lowerMessage = message.toLowerCase();\n  \n  if (lowerMessage.includes('generate') || lowerMessage.includes('plan') || lowerMessage.includes('tomorrow')) {\n    return \"I'll generate a personalized plan for you. Please use the 'Generate Plan' button to create your daily schedule based on your profile and historical performance.\";\n  }\n  \n  if (lowerMessage.includes('move') || lowerMessage.includes('reschedule')) {\n    return \"To move a task, you can drag and drop it on the timeline or edit it directly by clicking on the task block.\";\n  }\n  \n  if (lowerMessage.includes('add') || lowerMessage.includes('create')) {\n    return \"You can add new tasks by clicking on an empty time slot in your timeline. I'll help schedule it at an optimal time based on your productivity patterns.\";\n  }\n  \n  if (lowerMessage.includes('delete') || lowerMessage.includes('remove')) {\n    return \"To delete a task, click on it and select the delete option. Make sure you really want to remove it from your schedule!\";\n  }\n  \n  return \"I'm here to help manage your daily schedule! You can ask me to generate plans, move tasks, or answer questions about your productivity. Try saying 'Generate tomorrow's plan' or 'Move my meeting to 3pm'.\";\n}\n","size_bytes":3431},"components/chat/ChatInterface.tsx":{"content":"'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Textarea } from '@/components/ui/textarea';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { Send, Loader2, Sparkles } from 'lucide-react';\n\ninterface Message {\n  id: string;\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp: Date;\n}\n\ninterface ChatInterfaceProps {\n  currentDate?: string;\n}\n\nexport function ChatInterface({ currentDate }: ChatInterfaceProps) {\n  const [messages, setMessages] = useState<Message[]>([\n    {\n      id: '1',\n      role: 'assistant',\n      content: \"Hi! I'm FlowMate AI. I can help you generate daily plans, move tasks around, and answer questions about your productivity. What would you like to do today?\",\n      timestamp: new Date(),\n    },\n  ]);\n  const [input, setInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const scrollRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  const handleSend = async () => {\n    if (!input.trim() || isLoading) return;\n\n    const userMessage: Message = {\n      id: Date.now().toString(),\n      role: 'user',\n      content: input,\n      timestamp: new Date(),\n    };\n\n    setMessages((prev) => [...prev, userMessage]);\n    setInput('');\n    setIsLoading(true);\n\n    try {\n      const response = await fetch('/api/chat', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          message: input,\n          currentDate: currentDate || new Date().toISOString().split('T')[0],\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to get response');\n      }\n\n      const reader = response.body?.getReader();\n      const decoder = new TextDecoder();\n      let assistantContent = '';\n\n      const assistantMessage: Message = {\n        id: (Date.now() + 1).toString(),\n        role: 'assistant',\n        content: '',\n        timestamp: new Date(),\n      };\n\n      setMessages((prev) => [...prev, assistantMessage]);\n\n      if (reader) {\n        while (true) {\n          const { done, value } = await reader.read();\n          if (done) break;\n\n          const chunk = decoder.decode(value);\n          assistantContent += chunk;\n\n          setMessages((prev) =>\n            prev.map((msg) =>\n              msg.id === assistantMessage.id\n                ? { ...msg, content: assistantContent }\n                : msg\n            )\n          );\n        }\n      }\n    } catch (error) {\n      console.error('Chat error:', error);\n      const errorMessage: Message = {\n        id: (Date.now() + 1).toString(),\n        role: 'assistant',\n        content: \"Sorry, I encountered an error. Please try again.\",\n        timestamp: new Date(),\n      };\n      setMessages((prev) => [...prev, errorMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col h-full bg-background border rounded-lg shadow-sm\">\n      <div className=\"flex items-center gap-2 p-4 border-b bg-muted/50\">\n        <Sparkles className=\"w-5 h-5 text-primary\" />\n        <h3 className=\"font-semibold\">FlowMate AI Assistant</h3>\n      </div>\n\n      <ScrollArea className=\"flex-1 p-4\" ref={scrollRef}>\n        <div className=\"space-y-4\">\n          {messages.map((message) => (\n            <div\n              key={message.id}\n              className={`flex ${\n                message.role === 'user' ? 'justify-end' : 'justify-start'\n              }`}\n            >\n              <div\n                className={`max-w-[80%] rounded-lg px-4 py-2 ${\n                  message.role === 'user'\n                    ? 'bg-primary text-primary-foreground'\n                    : 'bg-muted'\n                }`}\n              >\n                <p className=\"text-sm whitespace-pre-wrap\">{message.content}</p>\n                <p className=\"text-xs opacity-70 mt-1\">\n                  {message.timestamp.toLocaleTimeString([], {\n                    hour: '2-digit',\n                    minute: '2-digit',\n                  })}\n                </p>\n              </div>\n            </div>\n          ))}\n          {isLoading && (\n            <div className=\"flex justify-start\">\n              <div className=\"bg-muted rounded-lg px-4 py-2\">\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\n              </div>\n            </div>\n          )}\n        </div>\n      </ScrollArea>\n\n      <div className=\"p-4 border-t\">\n        <div className=\"flex gap-2\">\n          <Textarea\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            onKeyDown={handleKeyDown}\n            placeholder=\"Ask me anything or try 'Generate tomorrow's plan'...\"\n            className=\"min-h-[60px] max-h-[120px]\"\n            disabled={isLoading}\n          />\n          <Button\n            onClick={handleSend}\n            disabled={!input.trim() || isLoading}\n            size=\"icon\"\n            className=\"h-[60px] w-[60px]\"\n          >\n            <Send className=\"w-5 h-5\" />\n          </Button>\n        </div>\n        <p className=\"text-xs text-muted-foreground mt-2\">\n          Press Enter to send, Shift+Enter for new line\n        </p>\n      </div>\n    </div>\n  );\n}\n","size_bytes":5548},"app/onboarding/page.tsx":{"content":"'use client';\n\nimport { useRouter } from 'next/navigation';\nimport { OnboardingWizard } from '@/components/onboarding/OnboardingWizard';\nimport { OnboardingData } from '@/types/shared';\n\nexport default function OnboardingPage() {\n  const router = useRouter();\n\n  const handleComplete = async (data: OnboardingData) => {\n    try {\n      const response = await fetch('/api/user/onboarding', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to save onboarding data');\n      }\n\n      router.push('/dashboard');\n    } catch (error) {\n      console.error('Onboarding error:', error);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 py-12\">\n      <OnboardingWizard onComplete={handleComplete} />\n    </div>\n  );\n}\n","size_bytes":935},"lib/ai/prompts.ts":{"content":"import { UserProfile, Feedback, ActivityPattern, Task } from '@/types/shared';\n\nexport function buildPlanGenerationPrompt(\n  profile: UserProfile,\n  historicalFeedback: Feedback[],\n  activityPatterns: ActivityPattern[],\n  targetDate: string\n): string {\n  const feedbackSummary = summarizeFeedback(historicalFeedback);\n  const patternSummary = summarizePatterns(activityPatterns);\n\n  return `You are an AI assistant helping to generate a personalized daily productivity plan.\n\n## User Profile\n- Occupation: ${profile.occupation}\n- Focus Capacity (1-10): ${profile.focusScale}\n- Peak Performance Hours: ${profile.peakHours.join(', ')}\n- Daily Habits: ${profile.habits.join(', ')}\n- Daily Routine: ${profile.routine}\n\n## Historical Performance Insights\n${feedbackSummary}\n\n## Activity Patterns\n${patternSummary}\n\n## Task\nGenerate a detailed daily plan for ${targetDate}. The plan should:\n1. Schedule high-priority tasks during peak performance hours (${profile.peakHours.join(', ')})\n2. Consider the user's focus capacity of ${profile.focusScale}/10\n3. Balance work periods with breaks based on historical feedback\n4. Account for recurring habits: ${profile.habits.join(', ')}\n5. Learn from past performance patterns\n6. Include realistic time blocks (minimum 15 minutes, maximum 3 hours)\n7. Provide 8-12 tasks throughout the day\n\n## Output Format (JSON)\nReturn ONLY a valid JSON array of tasks with this exact structure:\n[\n  {\n    \"time\": \"09:00\",\n    \"duration\": 60,\n    \"title\": \"Task description\",\n    \"priority\": 3.5\n  }\n]\n\nPriority scale: 1.0 (lowest) to 5.0 (highest). Use decimals (e.g., 2.5, 3.0, 4.5).\nTimes in 24-hour format. Duration in minutes.\n\nGenerate the plan now:`;\n}\n\nexport function buildChatPrompt(\n  userMessage: string,\n  profile: UserProfile,\n  currentPlan: Task[]\n): string {\n  return `You are FlowMate AI, a productivity assistant helping to manage daily tasks.\n\n## User Profile\n- Occupation: ${profile.occupation}\n- Focus Capacity: ${profile.focusScale}/10\n- Peak Hours: ${profile.peakHours.join(', ')}\n\n## Current Plan (${currentPlan.length} tasks)\n${currentPlan.map((t, i) => `${i + 1}. ${t.time} - ${t.title} (${t.duration}min, priority ${t.priority})`).join('\\n')}\n\n## User Message\n\"${userMessage}\"\n\n## Your Role\n- Parse commands like: \"generate tomorrow's plan\", \"move task to 3pm\", \"add meeting at 2pm\"\n- Provide helpful, concise responses\n- For plan generation, return structured data (see format below)\n- For modifications, explain what will happen\n- Be friendly but professional\n\n## Command Detection\nIf the user wants to:\n- Generate a plan: Return JSON array of tasks\n- Move a task: Identify task and new time\n- Add a task: Extract task details\n- Delete a task: Identify task to remove\n- General question: Answer naturally\n\nRespond to the user now:`;\n}\n\nfunction summarizeFeedback(feedback: Feedback[]): string {\n  if (feedback.length === 0) {\n    return 'No historical feedback available yet.';\n  }\n\n  const avgFocus = feedback.reduce((sum, f) => sum + f.focusRating, 0) / feedback.length;\n  const avgCompletion = feedback.reduce((sum, f) => sum + f.completionPercent, 0) / feedback.length;\n  const recentFeedback = feedback.slice(-10);\n\n  const insights = [];\n  insights.push(`Average Focus Rating: ${avgFocus.toFixed(1)}/10`);\n  insights.push(`Average Completion Rate: ${avgCompletion.toFixed(0)}%`);\n\n  const lowFocusTasks = recentFeedback.filter(f => f.focusRating < 5);\n  if (lowFocusTasks.length > 0) {\n    insights.push(`Low focus reported in ${lowFocusTasks.length} recent tasks`);\n  }\n\n  const incompleteTasks = recentFeedback.filter(f => f.completionPercent < 70);\n  if (incompleteTasks.length > 0) {\n    insights.push(`${incompleteTasks.length} tasks with low completion rates`);\n  }\n\n  return insights.join('\\n');\n}\n\nfunction summarizePatterns(patterns: ActivityPattern[]): string {\n  if (patterns.length === 0) {\n    return 'No activity patterns available yet.';\n  }\n\n  const recentPattern = patterns[patterns.length - 1];\n  const hourlyData = Object.entries(recentPattern.hourly);\n\n  const highProductivityHours = hourlyData\n    .filter(([_, data]) => data.focus > 7 && data.completion > 80)\n    .map(([hour]) => hour);\n\n  const lowProductivityHours = hourlyData\n    .filter(([_, data]) => data.focus < 5 || data.completion < 50)\n    .map(([hour]) => hour);\n\n  const insights = [];\n  if (highProductivityHours.length > 0) {\n    insights.push(`High productivity hours: ${highProductivityHours.join(', ')}`);\n  }\n  if (lowProductivityHours.length > 0) {\n    insights.push(`Lower productivity hours: ${lowProductivityHours.join(', ')}`);\n  }\n\n  return insights.length > 0 ? insights.join('\\n') : 'Building activity patterns...';\n}\n\nexport function parseTasksFromAIResponse(response: string): Task[] {\n  try {\n    const jsonMatch = response.match(/\\[[\\s\\S]*\\]/);\n    if (!jsonMatch) {\n      throw new Error('No JSON array found in response');\n    }\n\n    const parsed = JSON.parse(jsonMatch[0]);\n    \n    if (!Array.isArray(parsed)) {\n      throw new Error('Response is not an array');\n    }\n\n    return parsed.map((task, index) => ({\n      id: `ai-${Date.now()}-${index}`,\n      time: task.time,\n      duration: task.duration,\n      title: task.title,\n      priority: task.priority,\n      completed: false,\n      source: 'ai' as const,\n    }));\n  } catch (error) {\n    console.error('Failed to parse AI response:', error);\n    throw new Error('Failed to parse AI-generated tasks');\n  }\n}\n","size_bytes":5432},"app/api/analytics/calculate/route.ts":{"content":"import { NextRequest } from 'next/server';\nimport { getUserId, unauthorized, badRequest, serverError, success } from '@/lib/api-utils';\nimport { feedbackRepo, productivityRepo, activityRepo } from '@/lib/db/repository';\nimport { calculateProductivityScore, generateActivityPattern } from '@/lib/ai';\n\nexport async function POST(request: NextRequest) {\n  try {\n    const userId = await getUserId();\n    \n    if (!userId) {\n      return unauthorized();\n    }\n\n    const body = await request.json();\n    const { date } = body;\n    \n    if (!date) {\n      return badRequest('Date is required');\n    }\n\n    const feedbackResult = await feedbackRepo.getAllUserFeedback(userId);\n    \n    if (!feedbackResult.ok) {\n      return serverError('Failed to fetch feedback data');\n    }\n\n    const allFeedback = feedbackResult.value || [];\n\n    const productivityScore = calculateProductivityScore(date, allFeedback);\n    await productivityRepo.saveScore(userId, date, productivityScore);\n\n    const activityPattern = generateActivityPattern(date, allFeedback);\n    await activityRepo.saveActivity(userId, date, activityPattern);\n\n    return success({\n      productivityScore,\n      activityPattern,\n      message: 'Analytics calculated successfully',\n    }, 201);\n  } catch (error) {\n    console.error('Error calculating analytics:', error);\n    return serverError();\n  }\n}\n","size_bytes":1360},"components/feedback/FeedbackManager.tsx":{"content":"'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { FeedbackToast } from './FeedbackToast';\nimport { Task, Feedback } from '@/types/shared';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface FeedbackManagerProps {\n  tasks: Task[];\n  currentDate: string;\n  userId: string;\n}\n\nexport function FeedbackManager({ tasks, currentDate, userId }: FeedbackManagerProps) {\n  const [activeTask, setActiveTask] = useState<Task | null>(null);\n  const { toast } = useToast();\n\n  const checkForUpcomingTaskEnds = useCallback(() => {\n    const now = new Date();\n    const currentHour = now.getHours();\n    const currentMinute = now.getMinutes();\n    const currentTimeInMinutes = currentHour * 60 + currentMinute;\n\n    for (const task of tasks) {\n      if (task.completed) continue;\n\n      const [taskHour, taskMinute] = task.time.split(':').map(Number);\n      const taskStartInMinutes = taskHour * 60 + taskMinute;\n      const taskEndInMinutes = taskStartInMinutes + task.duration;\n      \n      const minutesUntilEnd = taskEndInMinutes - currentTimeInMinutes;\n\n      if (minutesUntilEnd === 2) {\n        setActiveTask(task);\n        return;\n      }\n    }\n  }, [tasks]);\n\n  useEffect(() => {\n    const interval = setInterval(checkForUpcomingTaskEnds, 60000);\n    \n    checkForUpcomingTaskEnds();\n\n    return () => clearInterval(interval);\n  }, [checkForUpcomingTaskEnds]);\n\n  const handleSubmitFeedback = async (feedbackData: Omit<Feedback, 'timestamp' | 'taskDate'>) => {\n    try {\n      const response = await fetch('/api/feedback', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          ...feedbackData,\n          taskDate: currentDate,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to submit feedback');\n      }\n\n      toast({\n        title: 'Feedback submitted',\n        description: 'Thank you for your feedback! This helps improve your future plans.',\n      });\n\n      setActiveTask(null);\n    } catch (error) {\n      console.error('Error submitting feedback:', error);\n      toast({\n        title: 'Error',\n        description: 'Failed to submit feedback. Please try again.',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  const handleDismiss = () => {\n    setActiveTask(null);\n  };\n\n  if (!activeTask) {\n    return null;\n  }\n\n  return (\n    <FeedbackToast\n      task={activeTask}\n      onSubmit={handleSubmitFeedback}\n      onDismiss={handleDismiss}\n    />\n  );\n}\n","size_bytes":2525},"app/dashboard/page.tsx":{"content":"'use client';\n\nimport { useState, useEffect } from 'react';\nimport { format } from 'date-fns';\nimport { ProductivityCalendar } from '@/components/calendar/ProductivityCalendar';\nimport { DayTimeline } from '@/components/timeline/DayTimeline';\nimport { TaskEditDialog } from '@/components/timeline/TaskEditDialog';\nimport { usePlanStore } from '@/stores/plan';\nimport { useUserStore } from '@/stores/user';\nimport { Task } from '@/types/shared';\nimport { Button } from '@/components/ui/button';\nimport { Calendar, LayoutDashboard } from 'lucide-react';\n\nexport default function DashboardPage() {\n  const [selectedDate, setSelectedDate] = useState(new Date());\n  const [selectedTask, setSelectedTask] = useState<Task | null>(null);\n  const [isTaskDialogOpen, setIsTaskDialogOpen] = useState(false);\n\n  const currentPlan = usePlanStore((state) => state.currentPlan);\n  const setCurrentPlan = usePlanStore((state) => state.setCurrentPlan);\n  const setSelectedDateInStore = usePlanStore((state) => state.setSelectedDate);\n  const updateTask = usePlanStore((state) => state.updateTask);\n  const removeTask = usePlanStore((state) => state.removeTask);\n  const userProfile = useUserStore((state) => state.profile);\n\n  useEffect(() => {\n    const dateStr = format(selectedDate, 'yyyy-MM-dd');\n    setSelectedDateInStore(dateStr);\n    \n    const loadPlanForDate = async () => {\n      try {\n        const response = await fetch(`/api/plan?date=${dateStr}`);\n        if (response.ok) {\n          const data = await response.json();\n          setCurrentPlan(data.plan);\n        }\n      } catch (error) {\n        console.error('Error loading plan:', error);\n      }\n    };\n    \n    loadPlanForDate();\n  }, [selectedDate, setSelectedDateInStore, setCurrentPlan]);\n\n  const tasks = currentPlan?.tasks || [];\n\n  const handleTaskClick = (task: Task) => {\n    setSelectedTask(task);\n    setIsTaskDialogOpen(true);\n  };\n\n  const handleTaskUpdate = (taskId: string, updates: Partial<Task>) => {\n    updateTask(taskId, updates);\n  };\n\n  const handleTaskDelete = (taskId: string) => {\n    removeTask(taskId);\n  };\n\n  return (\n    <div className=\"h-screen flex flex-col\">\n      <header className=\"border-b bg-background px-6 py-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            <LayoutDashboard className=\"w-6 h-6 text-primary\" />\n            <h1 className=\"text-2xl font-bold\">FlowMate</h1>\n          </div>\n          <div className=\"flex items-center gap-4\">\n            <div className=\"text-sm text-muted-foreground\">\n              {format(selectedDate, 'EEEE, MMMM d, yyyy')}\n            </div>\n            <Button variant=\"outline\" size=\"sm\">\n              Generate Plan\n            </Button>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"flex-1 flex overflow-hidden\">\n        <aside className=\"w-[30%] border-r bg-muted/10 p-6 overflow-auto\">\n          <div className=\"flex items-center gap-2 mb-4\">\n            <Calendar className=\"w-5 h-5\" />\n            <h2 className=\"text-lg font-semibold\">Calendar</h2>\n          </div>\n          <ProductivityCalendar\n            selectedDate={selectedDate}\n            onDateChange={setSelectedDate}\n          />\n        </aside>\n\n        <main className=\"w-[70%] p-6 overflow-auto\">\n          <div className=\"mb-4\">\n            <h2 className=\"text-lg font-semibold\">Daily Timeline</h2>\n            <p className=\"text-sm text-muted-foreground\">\n              {tasks.length} tasks scheduled for today\n            </p>\n          </div>\n          <div className=\"relative h-[calc(100vh-200px)] pl-20 pr-4\">\n            <DayTimeline\n              date={selectedDate}\n              tasks={tasks}\n              userProfile={userProfile}\n              onTaskClick={handleTaskClick}\n              onTaskUpdate={handleTaskUpdate}\n            />\n          </div>\n        </main>\n      </div>\n\n      <TaskEditDialog\n        task={selectedTask}\n        open={isTaskDialogOpen}\n        onClose={() => {\n          setIsTaskDialogOpen(false);\n          setSelectedTask(null);\n        }}\n        onSave={handleTaskUpdate}\n        onDelete={handleTaskDelete}\n      />\n    </div>\n  );\n}\n","size_bytes":4195},"components/calendar/ProductivityCalendar.tsx":{"content":"'use client';\n\nimport { Calendar, dateFnsLocalizer } from 'react-big-calendar';\nimport { format, parse, startOfWeek, getDay } from 'date-fns';\nimport { useProductivityScores } from '@/stores/feedback';\nimport { getProductivityBadge, getBadgeColor } from '@/types/shared';\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\nimport { cn } from '@/lib/utils';\n\nconst locales = {\n  'en-US': require('date-fns/locale/en-US'),\n};\n\nconst localizer = dateFnsLocalizer({\n  format,\n  parse,\n  startOfWeek,\n  getDay,\n  locales,\n});\n\ninterface ProductivityCalendarProps {\n  selectedDate: Date;\n  onDateChange: (date: Date) => void;\n  className?: string;\n}\n\nexport function ProductivityCalendar({\n  selectedDate,\n  onDateChange,\n  className,\n}: ProductivityCalendarProps) {\n  const productivityScores = useProductivityScores((state: { scores: Record<string, any> }) => state.scores);\n\n  const customDayPropGetter = (date: Date) => {\n    const dateStr = format(date, 'yyyy-MM-dd');\n    const score = productivityScores[dateStr];\n\n    if (!score) {\n      return {};\n    }\n\n    const badge = getProductivityBadge(score.score);\n    const color = getBadgeColor(badge);\n\n    return {\n      style: {\n        backgroundColor: color + '20',\n        border: `2px solid ${color}`,\n      },\n    };\n  };\n\n  const customDateCellWrapper = ({ children, value }: any) => {\n    const dateStr = format(value, 'yyyy-MM-dd');\n    const score = productivityScores[dateStr];\n\n    if (!score) {\n      return children;\n    }\n\n    const badge = getProductivityBadge(score.score);\n    const badgeEmoji = {\n      excellent: 'üü¢',\n      good: 'üü°',\n      average: 'üü†',\n      'needs-work': 'üî¥',\n    }[badge];\n\n    return (\n      <div className=\"relative\">\n        {children}\n        <div className=\"absolute top-1 right-1 text-xs\">\n          {badgeEmoji}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className={cn('productivity-calendar', className)}>\n      <style jsx global>{`\n        .productivity-calendar .rbc-calendar {\n          font-family: inherit;\n        }\n        .productivity-calendar .rbc-header {\n          padding: 0.75rem 0;\n          font-weight: 600;\n          border-bottom: 1px solid hsl(var(--border));\n        }\n        .productivity-calendar .rbc-month-view {\n          border: 1px solid hsl(var(--border));\n          border-radius: 0.5rem;\n          overflow: hidden;\n        }\n        .productivity-calendar .rbc-day-bg {\n          border-left: 1px solid hsl(var(--border));\n        }\n        .productivity-calendar .rbc-month-row {\n          border-top: 1px solid hsl(var(--border));\n        }\n        .productivity-calendar .rbc-date-cell {\n          padding: 0.5rem;\n          text-align: right;\n        }\n        .productivity-calendar .rbc-now {\n          background-color: hsl(var(--primary) / 0.1);\n        }\n        .productivity-calendar .rbc-off-range-bg {\n          background-color: hsl(var(--muted) / 0.3);\n        }\n        .productivity-calendar .rbc-today {\n          background-color: hsl(var(--primary) / 0.15);\n        }\n        .productivity-calendar .rbc-selected {\n          background-color: hsl(var(--primary) / 0.3) !important;\n        }\n      `}</style>\n      <Calendar\n        localizer={localizer}\n        date={selectedDate}\n        onNavigate={onDateChange}\n        onSelectSlot={(slotInfo: any) => onDateChange(slotInfo.start)}\n        view=\"month\"\n        views={['month']}\n        selectable\n        toolbar={true}\n        dayPropGetter={customDayPropGetter}\n        components={{\n          dateCellWrapper: customDateCellWrapper,\n        }}\n        style={{ height: '100%', width: '100%' }}\n      />\n      <div className=\"mt-4 flex flex-wrap gap-3 text-xs\">\n        <div className=\"flex items-center gap-1\">\n          <span>üü¢</span>\n          <span className=\"text-muted-foreground\">90-100% Excellent</span>\n        </div>\n        <div className=\"flex items-center gap-1\">\n          <span>üü°</span>\n          <span className=\"text-muted-foreground\">70-89% Good</span>\n        </div>\n        <div className=\"flex items-center gap-1\">\n          <span>üü†</span>\n          <span className=\"text-muted-foreground\">50-69% Average</span>\n        </div>\n        <div className=\"flex items-center gap-1\">\n          <span>üî¥</span>\n          <span className=\"text-muted-foreground\">&lt;50% Needs work</span>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":4406},"components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"lib/ai/pattern-analysis.ts":{"content":"import { Feedback, ProductivityScore, ActivityPattern, HourlyActivity } from '@/types/shared';\n\nexport function calculateProductivityScore(\n  date: string,\n  feedbackList: Feedback[]\n): ProductivityScore {\n  const dateFeedback = feedbackList.filter(f => f.taskDate === date);\n  \n  if (dateFeedback.length === 0) {\n    return {\n      date,\n      score: 0,\n      totalTasks: 0,\n      completedTasks: 0,\n      avgFocus: 0,\n      avgCompletion: 0,\n      calculatedAt: new Date().toISOString(),\n    };\n  }\n\n  const totalTasks = dateFeedback.length;\n  const completedTasks = dateFeedback.filter(f => f.completionPercent >= 80).length;\n  const avgFocus = dateFeedback.reduce((sum, f) => sum + f.focusRating, 0) / totalTasks;\n  const avgCompletion = dateFeedback.reduce((sum, f) => sum + f.completionPercent, 0) / totalTasks;\n  \n  const score = (avgFocus / 10) * 0.5 + (avgCompletion / 100) * 0.5;\n  const normalizedScore = score * 100;\n\n  return {\n    date,\n    score: Math.round(normalizedScore * 10) / 10,\n    totalTasks,\n    completedTasks,\n    avgFocus: Math.round(avgFocus * 10) / 10,\n    avgCompletion: Math.round(avgCompletion),\n    calculatedAt: new Date().toISOString(),\n  };\n}\n\nexport function generateActivityPattern(\n  date: string,\n  feedbackList: Feedback[]\n): ActivityPattern {\n  const dateFeedback = feedbackList.filter(f => f.taskDate === date);\n  \n  const hourly: Record<string, HourlyActivity> = {};\n\n  for (let hour = 0; hour < 24; hour++) {\n    const hourStr = hour.toString().padStart(2, '0');\n    \n    const hourFeedback = dateFeedback.filter(f => {\n      const taskHour = parseInt(f.taskId.split('-')[1] || '0');\n      return taskHour === hour;\n    });\n\n    if (hourFeedback.length > 0) {\n      const avgFocus = hourFeedback.reduce((sum, f) => sum + f.focusRating, 0) / hourFeedback.length;\n      const avgCompletion = hourFeedback.reduce((sum, f) => sum + f.completionPercent, 0) / hourFeedback.length;\n      \n      const activity = determineActivity(avgFocus, avgCompletion);\n      \n      hourly[hourStr] = {\n        focus: Math.round(avgFocus * 10) / 10,\n        completion: Math.round(avgCompletion),\n        activity,\n      };\n    } else {\n      hourly[hourStr] = {\n        focus: 0,\n        completion: 0,\n        activity: 'idle',\n      };\n    }\n  }\n\n  return {\n    date,\n    hourly,\n  };\n}\n\nfunction determineActivity(focus: number, completion: number): string {\n  if (focus >= 7 && completion >= 80) {\n    return 'peak-productivity';\n  } else if (focus >= 5 && completion >= 60) {\n    return 'moderate-work';\n  } else if (focus < 5 || completion < 50) {\n    return 'low-productivity';\n  } else {\n    return 'steady-work';\n  }\n}\n\nexport function aggregateFeedbackInsights(feedbackList: Feedback[]): {\n  overallFocus: number;\n  overallCompletion: number;\n  bestHours: string[];\n  worstHours: string[];\n  totalFeedback: number;\n} {\n  if (feedbackList.length === 0) {\n    return {\n      overallFocus: 0,\n      overallCompletion: 0,\n      bestHours: [],\n      worstHours: [],\n      totalFeedback: 0,\n    };\n  }\n\n  const overallFocus = feedbackList.reduce((sum, f) => sum + f.focusRating, 0) / feedbackList.length;\n  const overallCompletion = feedbackList.reduce((sum, f) => sum + f.completionPercent, 0) / feedbackList.length;\n\n  const hourlyPerformance: Record<string, { focus: number; completion: number; count: number }> = {};\n\n  feedbackList.forEach(f => {\n    const hour = f.taskId.split('-')[1] || '0';\n    \n    if (!hourlyPerformance[hour]) {\n      hourlyPerformance[hour] = { focus: 0, completion: 0, count: 0 };\n    }\n    \n    hourlyPerformance[hour].focus += f.focusRating;\n    hourlyPerformance[hour].completion += f.completionPercent;\n    hourlyPerformance[hour].count += 1;\n  });\n\n  const hourlyAverages = Object.entries(hourlyPerformance)\n    .map(([hour, data]) => ({\n      hour,\n      avgFocus: data.focus / data.count,\n      avgCompletion: data.completion / data.count,\n      avgScore: ((data.focus / data.count) / 10 + (data.completion / data.count) / 100) / 2,\n    }))\n    .sort((a, b) => b.avgScore - a.avgScore);\n\n  const bestHours = hourlyAverages.slice(0, 3).map(h => `${h.hour}:00`);\n  const worstHours = hourlyAverages.slice(-3).reverse().map(h => `${h.hour}:00`);\n\n  return {\n    overallFocus: Math.round(overallFocus * 10) / 10,\n    overallCompletion: Math.round(overallCompletion),\n    bestHours,\n    worstHours,\n    totalFeedback: feedbackList.length,\n  };\n}\n","size_bytes":4409},"hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type { ToastActionElement, ToastProps } from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3762},"lib/ai/index.ts":{"content":"export { getGenAI, checkRateLimit, resetRateLimit } from './client';\nexport { generateDailyPlan, streamChatResponse } from './generation';\nexport {\n  buildPlanGenerationPrompt,\n  buildChatPrompt,\n  parseTasksFromAIResponse,\n} from './prompts';\nexport {\n  calculateProductivityScore,\n  generateActivityPattern,\n  aggregateFeedbackInsights,\n} from './pattern-analysis';\n","size_bytes":368},"components/ui/slider.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as SliderPrimitive from \"@radix-ui/react-slider\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n));\nSlider.displayName = SliderPrimitive.Root.displayName;\n\nexport { Slider };\n","size_bytes":1098},"components/timeline/DayTimeline.tsx":{"content":"'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { Task, UserProfile, getPriorityColor } from '@/types/shared';\nimport { TaskBlock } from './TaskBlock';\nimport { cn } from '@/lib/utils';\nimport { format, parse, isBefore, addMinutes } from 'date-fns';\n\ninterface DayTimelineProps {\n  date: Date;\n  tasks: Task[];\n  userProfile: UserProfile | null;\n  onTaskClick: (task: Task) => void;\n  onTaskUpdate: (taskId: string, updates: Partial<Task>) => void;\n  className?: string;\n}\n\nconst HOURS = Array.from({ length: 24 }, (_, i) => {\n  const hour = (i + 3) % 24;\n  return hour;\n});\n\nexport function DayTimeline({\n  date,\n  tasks,\n  userProfile,\n  onTaskClick,\n  onTaskUpdate,\n  className,\n}: DayTimelineProps) {\n  const timelineRef = useRef<HTMLDivElement>(null);\n  const [currentTimePosition, setCurrentTimePosition] = useState<number | null>(null);\n\n  useEffect(() => {\n    const updateCurrentTime = () => {\n      const now = new Date();\n      const currentDate = format(now, 'yyyy-MM-dd');\n      const selectedDate = format(date, 'yyyy-MM-dd');\n\n      if (currentDate === selectedDate) {\n        const hours = now.getHours();\n        const minutes = now.getMinutes();\n        const totalMinutes = hours * 60 + minutes;\n        const startMinutes = 3 * 60;\n        const adjustedMinutes = totalMinutes >= startMinutes ? totalMinutes - startMinutes : totalMinutes + (24 * 60 - startMinutes);\n        const position = (adjustedMinutes / (24 * 60)) * 100;\n        setCurrentTimePosition(position);\n      } else {\n        setCurrentTimePosition(null);\n      }\n    };\n\n    updateCurrentTime();\n    const interval = setInterval(updateCurrentTime, 60000);\n    return () => clearInterval(interval);\n  }, [date]);\n\n  const getTaskPosition = (task: Task) => {\n    const [hours, minutes] = task.time.split(':').map(Number);\n    const totalMinutes = hours * 60 + minutes;\n    const startMinutes = 3 * 60;\n    const adjustedMinutes = totalMinutes >= startMinutes ? totalMinutes - startMinutes : totalMinutes + (24 * 60 - startMinutes);\n    const top = (adjustedMinutes / (24 * 60)) * 100;\n    const height = (task.duration / (24 * 60)) * 100;\n    return { top: `${top}%`, height: `${height}%` };\n  };\n\n  const isTaskEditable = (task: Task) => {\n    const now = new Date();\n    const taskDateTime = parse(`${format(date, 'yyyy-MM-dd')} ${task.time}`, 'yyyy-MM-dd HH:mm', new Date());\n    const taskEndTime = addMinutes(taskDateTime, task.duration);\n    return isBefore(now, taskEndTime);\n  };\n\n  const gradient = userProfile?.colorGradient || { low: '#60a5fa', high: '#c084fc' };\n\n  return (\n    <div className={cn('day-timeline relative h-full', className)} ref={timelineRef}>\n      <div className=\"relative h-full\">\n        {HOURS.map((hour, index) => (\n          <div\n            key={hour}\n            className=\"absolute w-full border-t border-border\"\n            style={{ top: `${(index / 24) * 100}%` }}\n          >\n            <div className=\"absolute -left-16 -top-3 text-sm text-muted-foreground\">\n              {format(new Date().setHours(hour, 0, 0, 0), 'h:mm a')}\n            </div>\n          </div>\n        ))}\n\n        {currentTimePosition !== null && (\n          <div\n            className=\"absolute w-full border-t-2 border-red-500 z-10\"\n            style={{ top: `${currentTimePosition}%` }}\n          >\n            <div className=\"absolute -left-16 -top-3 text-sm font-semibold text-red-500\">\n              Now\n            </div>\n          </div>\n        )}\n\n        {tasks.map((task) => {\n          const position = getTaskPosition(task);\n          const isEditable = isTaskEditable(task);\n          const color = getPriorityColor(task.priority, gradient);\n\n          return (\n            <TaskBlock\n              key={task.id}\n              task={task}\n              position={position}\n              color={color}\n              isEditable={isEditable}\n              onClick={() => onTaskClick(task)}\n            />\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n","size_bytes":4001},"app/api/analytics/insights/route.ts":{"content":"import { NextRequest } from 'next/server';\nimport { getUserId, unauthorized, serverError, success } from '@/lib/api-utils';\nimport { feedbackRepo } from '@/lib/db/repository';\nimport { aggregateFeedbackInsights } from '@/lib/ai';\n\nexport async function GET(request: NextRequest) {\n  try {\n    const userId = await getUserId();\n    \n    if (!userId) {\n      return unauthorized();\n    }\n\n    const feedbackResult = await feedbackRepo.getAllUserFeedback(userId);\n    \n    if (!feedbackResult.ok) {\n      return serverError('Failed to fetch feedback data');\n    }\n\n    const allFeedback = feedbackResult.value || [];\n    const insights = aggregateFeedbackInsights(allFeedback);\n\n    return success({ insights });\n  } catch (error) {\n    console.error('Error fetching insights:', error);\n    return serverError();\n  }\n}\n","size_bytes":816},".local/state/replit/agent/progress_tracker.md":{"content":"[x] 1. Install the required packages - COMPLETED ‚úì\n[x] 2. Restart the workflow to see if the project is working - COMPLETED ‚úì\n[x] 3. Verify the project is working using the screenshot tool - COMPLETED ‚úì\n[x] 4. Inform user the import is completed and they can start building - COMPLETED ‚úì\n\n## Phase 1: Foundation & DevOps - COMPLETED ‚úì\n[x] Set up shadcn/ui components and base UI components\n[x] Create project folder structure (components, lib, stores)\n[x] Set up Zustand store scaffolds (auth, user, plan, feedback)\n[x] Create lib/utils.ts with shared utilities\n[x] Create mock data utilities for development\n[x] .env.example file already exists with proper configuration\n[x] README already has comprehensive run instructions\n[x] Fixed type safety issue in mock data (removed as any casts)\n[x] Verified TypeScript type checking passes\n[x] Architect reviewed and approved all changes\n\n## Phase 3: Core UI Components - COMPLETED ‚úì\n[x] Created Onboarding Wizard with 5 steps (occupation, routine, habits, focus scale, peak hours)\n[x] Built Calendar Component with productivity badges and color coding\n[x] Built Timeline Component with hourly grid (3 AM ‚Üí 3 AM) and task blocks\n[x] Created Task Editing Dialog with validation and editing rules\n[x] Built Focus Mode Dashboard Layout with 30/70 split (calendar/timeline)\n[x] Connected all components to Zustand stores with optimistic updates\n[x] Added Progress and Slider UI components\n[x] Created Dialog UI component for modals\n[x] Integrated all Phase 3 features into dashboard\n\n## Phase 4: AI Integration & Feedback Loop - COMPLETED ‚úì\n[x] Google Gemini Setup - Installed SDK, created AI client wrapper with lazy loading, set up rate limiting\n[x] Plan Generation - Implemented /api/plan/generate endpoint with prompts, mock mode support, and AI integration\n[x] AI Chat Interface - Created ChatInterface component with streaming responses and command detection\n[x] Feedback Toast System - Created FeedbackToast component with timing triggers and FeedbackManager\n[x] Pattern Analysis - Implemented feedback aggregation, productivity scores, and hourly activity patterns\n[x] Analytics API endpoints - Created /api/analytics/calculate and /api/analytics/insights\n[x] Added Textarea, ScrollArea, and Select UI components\n[x] Fixed lazy initialization to prevent crashes in keyless/mock mode\n[x] Architect reviewed and approved all Phase 4 implementation","size_bytes":2410}},"version":2}